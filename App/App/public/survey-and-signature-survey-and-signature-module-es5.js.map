{"version":3,"sources":["webpack:///src/app/pages/survey-and-signature/signature-qr/signature-qr.component.html","webpack:///src/app/pages/survey-and-signature/signature-qr/signature-qr.component.ts","webpack:///src/app/pages/survey-and-signature/signature-without-qr/signature-without-qr.component.html","webpack:///src/app/pages/survey-and-signature/signature-without-qr/signature-without-qr.component.ts","webpack:///src/app/pages/survey-and-signature/survey-and-signature-routing.module.ts","webpack:///src/app/pages/survey-and-signature/survey-and-signature.module.ts","webpack:///src/app/pages/survey-and-signature/survey-and-signature.page.html","webpack:///src/app/pages/survey-and-signature/survey-and-signature.page.ts"],"names":["SignatureQRComponent","storage","cacheService","router","net","toastController","modalCtrl","alertController","signaturePadOptions","maxWidth","minWidth","canvasWidth","canvasHeight","disableBtnSendTask","actasAsesoria","infoEnteredSignatureQR","getInfoUser","get","infoUserARL","firma","signaturePad","toDataURL","split","signatureEntered","concat","console","log","clear","infoSignatureQR","nombreResponsableARL","nombres","apellidosResponsableARL","apellidos","cargo","licenciaSST","idLicenciaSst","numeroDocumentoEmpresa","idProveedor","nombreProveedor","documentoUsuarioARL","idPersona","emit","infoActa","getAllInfoToAdvisory","create","component","componentProps","info","modal","present","verification","drawStart","drawComplete","selector","templateUrl","styleUrls","SignatureWithoutQRComponent","pollSelectedExce","pollSelectedBue","pollSelectedReg","pollSelectedDef","showSignature","infoSignatureWithoutQR","enableBtnGuardar","selectedPoll","answerPoll","infoWithoutQR","routes","path","loadChildren","then","m","ResponsibleSignatureARLPageModule","SurveyAndSignaturePageRoutingModule","forChild","imports","exports","SurveyAndSignaturePageModule","declarations","SurveyAndSignaturePage","platform","photoService","loadingCtlr","advisoryTopicService","activityListCompany","data","responsibleList","textCheckFirma","disabledFirma","disabledBtnSignature","filesBase64","filesConcat","readFile","leerArchivos","JSON","parse","sessionStorage","companySelected","listaReposables","handlerVerification","data2","handlerVerificationCode","cssClass","backdropDismiss","mode","header","selectedVal","correo","inputs","name","type","placeholder","buttons","text","handler","role","alert","onDidDismiss","codigoVerificacion","verificationCodeInput","verificationCode","notification","checkNetwork","validateNetwork","idEmpresa","id","idResponsable","presentLoading","recordarCodigoVerificacion","toPromise","siEnvioCorreo","loading","dismiss","event","detail","value","infoQR","fechaCreaciónActa","Date","charAt","infoSurveyQR","nombreResponsable","Nombre","responsableId","tipoDocumentoResponsable","tipoDocumentoDescripcion","numeroDocumentoResponsable","numeroDocumento","firmaQR","answerPool","signature","dateCreatedSurvey","saveSurveyQR","navigateByUrl","apellidoResponsableARL","documentoResponsableARL","cargoARL","licenciaSSTARL","sendTask","checked","actaAsesoriaGestionada","createActaAsesoria","files","getFiles","saveActaAsesoria","creacionActa","f","body","UidActaAsesoria","uploadFileActaAsesoria","TTA_lista","length","tta","idActividadMigradaPorUsuario","notifCorreoActa","Fk_ID_ActividadMigradaPorUsuario","enviarCorreoNotificacionActaApp","photos","listaActividades","actividadesMigradas","i","listaActividadesMigradas","ids","forEach","element","idActividad","TTA_LISTA","index","findIndex","x","push","filter","a","find","ii","set","registerTime","AE_HorasTotales","activitiesChange","getInfoActaAsesoria","actSelec","codeActividadesMigradas","encontro","activities","estadoInterno","cambioCompanySelected","stringify","setItem","saveActasAsesoria","documentosAdjuntados","saveAttach","nombreArchivo","extensionBase","extensionBase64","directory","Data","base64","objUploadFile","UidActividadMigradaXUSuario","TipoSoporte","tipoDocumento","Base64","deleteFile","status","getNetworkStatus","Offline","presentToast","Online","message","duration","toast","titulo","notificacion","re","results","exec","minutes","setRegisteredTime","imagenesAdjuntas","obtenerAdjuntosFoto","objAdjuntarDoc","j","documento","objAdjuntarImg","idTipoArchivo","foto","base64Imagen","removeFile"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAeI;;AAAuB;;AAAQ;;AAAiB;;AAAU;;AAAqD;;;;;;AAArD;;AAAA;;;;;;AAK1D;;AAAuB;;AAAQ;;AAAkB;;AAAU;;AAAiC;;;;;;AAAjC;;AAAA;;;;;;AAC3D;;AAAuB;;AAAQ;;AAAqB;;AAAU;;AAA6B;;;;;;AAA7B;;AAAA;;;;;;AAS5D;;AAAqC;;AAAqD;;;;;;AAArD;;AAAA;;;;;;;;AAkBjC;;AAAgC;AAAA;;AAAA;;AAAA;AAAA;;AAAhC;;;;QClCGA,oB;AAsBX,oCACUC,OADV,EAEUC,YAFV,EAGUC,MAHV,EAIUC,GAJV,EAKUC,eALV,EAMUC,SANV,EAOUC,eAPV,EAO0C;AAAA;;AANhC,aAAAN,OAAA,GAAAA,OAAA;AACA,aAAAC,YAAA,GAAAA,YAAA;AACA,aAAAC,MAAA,GAAAA,MAAA;AACA,aAAAC,GAAA,GAAAA,GAAA;AACA,aAAAC,eAAA,GAAAA,eAAA;AACA,aAAAC,SAAA,GAAAA,SAAA;AACA,aAAAC,eAAA,GAAAA,eAAA,CAAgC,CA1B1C;;AACO,aAAAC,mBAAA,GAA8B;AACnCC,kBAAQ,EAAE,CADyB;AAEnCC,kBAAQ,EAAE,CAFyB;AAGnCC,qBAAW,EAAE,GAHsB;AAInCC,sBAAY,EAAE;AAJqB,SAA9B;AAOP,aAAAC,kBAAA,GAAqB,KAArB;AAOA,aAAAC,aAAA,GAAgB,EAAhB;AAEU,aAAAC,sBAAA,GAAyB,IAAI,0DAAJ,EAAzB;AAUN;;;;eAEJ,oBAAW;AACT,eAAKC,WAAL;AACD;;;eAEK,uBAAc;;;;;;AACC,yBAAM,KAAKf,OAAL,CAAagB,GAAb,CAAiB,QAAjB,CAAN;;;AAAnB,uBAAKC,W;;;;;;;;AACN;;;eAED,wBAAe;AACb;AACA,cAAMC,KAAK,GAAG,KAAKC,YAAL,CAAkBC,SAAlB,GAA8BC,KAA9B,CAAoC,GAApC,CAAd;AACA,eAAKC,gBAAL,GAAwBJ,KAAK,CAAC,CAAD,CAAL,CAASK,MAAT,CAAgB,GAAhB,EAAqBA,MAArB,CAA4B,GAA5B,EAAiCA,MAAjC,CAAwCL,KAAK,CAAC,CAAD,CAA7C,CAAxB;;AACA,cAAI,KAAKI,gBAAT,EAA2B;AACzB,iBAAKV,kBAAL,GAA0B,IAA1B;AACD,WAFD,MAEO;AACL,iBAAKA,kBAAL,GAA0B,KAA1B;AACD;AACF;;;eAED,qBAAY;AACV;AACAY,iBAAO,CAACC,GAAR,CAAY,eAAZ;AACD;;;eAED,iBAAQ;AACN,eAAKN,YAAL,CAAkBO,KAAlB;AACA,eAAKd,kBAAL,GAA0B,KAA1B;AACD;;;eAED,+BAAsB;AACpB,cAAMe,eAAe,GAAG;AACtBC,gCAAoB,EAAE,KAAKX,WAAL,CAAiBY,OADjB;AAEtBC,mCAAuB,EAAE,KAAKb,WAAL,CAAiBc,SAFpB;AAGtBC,iBAAK,EAAE,KAAKf,WAAL,CAAiBe,KAHF;AAItBC,uBAAW,EAAE,KAAKhB,WAAL,CAAiBiB,aAJR;AAKtBC,kCAAsB,EAAE,KAAKlB,WAAL,CAAiBmB,WALnB;AAMtBC,2BAAe,EAAE,KAAKpB,WAAL,CAAiBoB,eANZ;AAOtBC,+BAAmB,EAAE,KAAKrB,WAAL,CAAiBsB,SAPhB;AAQtBjB,4BAAgB,EAAE,KAAKA;AARD,WAAxB;AAUA,eAAKR,sBAAL,CAA4B0B,IAA5B,CAAiCb,eAAjC;AACD;;;eAEK,wBAAe;;;;;;AACnB;AACMc,0B,GAAW,KAAKxC,YAAL,CAAkByC,oBAAlB,E;;AACH,yBAAM,KAAKrC,SAAL,CAAesC,MAAf,CAAsB;AACxCC,6BAAS,EAAE,+HAD6B;AAExCC,kCAAc,EAAE;AACdC,0BAAI,EAAEL;AADQ;AAFwB,mBAAtB,CAAN;;;AAARM,uB;AAONA,uBAAK,CAACC,OAAN;;;;;;;;AACD;;;;;;;uBAtFUjD,oB,EAAoB,uH,EAAA,2I,EAAA,uH,EAAA,iJ,EAAA,+H,EAAA,+H,EAAA,+H;AAAA,K;;;YAApBA,oB;AAAoB,uC;AAAA;AAAA;oEACpB,kE,EAAY,I;;;;;;;;;;;;;;;;;ADfzB;;AACE;;AACE;;AACE;;AACE;;AACA;;AACE;;AAA6B;AAAA,mBAAS,IAAAkD,YAAA,EAAT;AAAuB,WAAvB;;AAAyC;;AAAS;;AACjF;;AACA;;AACF;;AACF;;AACF;;AAEA;;AACE;;AAAI;;AAAkB;;AACtB;;AACF;;AAEA;;AACE;;AAAI;;AAA0B;;AAC9B;;AACA;;AACF;;AAEA;;AACE;;AAAI;;AAAwB;;AAC9B;;AACA;;AACE;;AAA+C;AAAA,mBAAgB,IAAAC,SAAA,EAAhB;AAA2B,WAA3B,EAA4B,YAA5B,EAA4B;AAAA,mBAAe,IAAAC,YAAA,EAAf;AAA6B,WAAzD;;AAA4D;;AAC3G;;AACE;;AACF;;AACF;;AACA;;AAAY;AAAA,mBAAS,IAAAzB,KAAA,EAAT;AAAgB,WAAhB;;AAA6D;;AAAO;;AAEhF;;AACE;;AACE;;AAGF;;AACF;;AAEA;;AACE;;AACE;;AACE;;AACA;;AACE;;AACF;;AACA;;AACF;;AACF;;AACF;;AACF;;;;AAvCO;;AAAA;;AAKA;;AAAA;;AACA;;AAAA;;AAOY;;AAAA;;AAEI;;AAAA;;AAkBR;;AAAA;;;;;;;;;sEClCF3B,oB,EAAoB;cALhC,uDAKgC;eALtB;AACTqD,kBAAQ,EAAE,kBADD;AAETC,qBAAW,EAAE,+BAFJ;AAGTC,mBAAS,EAAE,CAAC,+BAAD;AAHF,S;AAKsB,Q;;;;;;;;;;;;;;;;;;gBAC9B,uD;iBAAU,kE;;;gBAmBV;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClCH;;AACE;;AACE;;AAAI;;AAAQ;;AACd;;AACA;;AACE;;AAAG;;AAAmH;;AACxH;;AACA;;AAEE;;AACE;;AACE;;AACE;;AAAuB;AAAA;;AAAA;;AAAA,sCAAuB,WAAvB;AAAkC,SAAlC;;AACrB;;AAAqC;;AAAS;;AAE9C;;AAEE;;AAKF;;AACF;;AACF;;AAEA;;AACE;;AAAuB;AAAA;;AAAA;;AAAA,sCAAuB,OAAvB;AAA8B,SAA9B;;AACrB;;AAAqC;;AAAK;;AAE1C;;AAEE;;AAKF;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AAAuB;AAAA;;AAAA;;AAAA,sCAAuB,SAAvB;AAAgC,SAAhC;;AACrB;;AAAqC;;AAAO;;AAE5C;;AAEE;;AAKF;;AACF;;AACF;;AAEA;;AACE;;AAAuB;AAAA;;AAAA;;AAAA,sCAAuB,YAAvB;AAAmC,SAAnC;;AACrB;;AAAqC;;AAAU;;AAE/C;;AAEE;;AAKF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;;;;;AAxDgB;;AAAA;;AAeA;;AAAA;;AAgBA;;AAAA;;AAeA;;AAAA;;;;;;AAeZ;;AACE;;AACF;;;;;;AADE;;AAAA;;;;;;;;AAJN;;AACE;;AAA+C;AAAA;;AAAA;;AAAA;AAAA,WAA4B,YAA5B,EAA4B;AAAA;;AAAA;;AAAA;AAAA,SAA5B;;AAA4D;;AAC3G;;AACE;;AAGF;;AACF;;;;;;AANiB;;AAAA;;AAEI;;AAAA;;;;;;;;AAKrB;;AAAY;AAAA;;AAAA;;AAAA;AAAA;;AAAmF;;AAAO;;;;;;AAEtG;;AACE;;AACE;;AAAkC;;AAAQ;;AAAgB;;AAC5D;;AACA;;AACE;;AAIF;;AACF;;;;;;AAR8C;;AAAA;;;;;;;;AAetC;;AAAqC;AAAA;;AAAA;;AAAA;AAAA;;AACnC;;AACF;;;;QC/FKC,2B;AAgCX,2CACUjD,eADV,EAEUN,OAFV,EAE0B;AAAA;;AADhB,aAAAM,eAAA,GAAAA,eAAA;AACA,aAAAN,OAAA,GAAAA,OAAA;AAjCV,aAAAwD,gBAAA,GAAmB,KAAnB;AACA,aAAAC,eAAA,GAAkB,KAAlB;AACA,aAAAC,eAAA,GAAkB,KAAlB;AACA,aAAAC,eAAA,GAAkB,KAAlB,CA8B0B,CApB1B;;AACO,aAAApD,mBAAA,GAA8B;AACnCC,kBAAQ,EAAE,CADyB;AAEnCC,kBAAQ,EAAE,CAFyB;AAGnCC,qBAAW,EAAE,GAHsB;AAInCC,sBAAY,EAAE;AAJqB,SAA9B;AASP,aAAAiD,aAAA,GAAgB,KAAhB;AAEU,aAAAC,sBAAA,GAAyB,IAAI,0DAAJ,EAAzB;AAIV,aAAAC,gBAAA,GAAmB,KAAnB;AAKI;;;;eAEJ,2BAAkB,CAAE;;;eAEpB,oBAAW;AACT,eAAK/C,WAAL;AACD;;;eAEK,uBAAc;;;;;;AACC,yBAAM,KAAKf,OAAL,CAAagB,GAAb,CAAiB,QAAjB,CAAN;;;AAAnB,uBAAKC,W;;;;;;;;AACN;;;eAED,uBAAc8C,YAAd,EAA4B;AAC1B,kBAAQA,YAAR;AACE,iBAAK,WAAL;AACE,mBAAKP,gBAAL,GAAwB,IAAxB;AACA,mBAAKE,eAAL,GAAuB,KAAvB;AACA,mBAAKD,eAAL,GAAuB,KAAvB;AACA,mBAAKE,eAAL,GAAuB,KAAvB;AACA,mBAAKC,aAAL,GAAqB,IAArB;AACA,mBAAKI,UAAL,GAAkB,WAAlB;AACA;;AACF,iBAAK,OAAL;AACE,mBAAKP,eAAL,GAAuB,IAAvB;AACA,mBAAKD,gBAAL,GAAwB,KAAxB;AACA,mBAAKE,eAAL,GAAuB,KAAvB;AACA,mBAAKC,eAAL,GAAuB,KAAvB;AACA,mBAAKC,aAAL,GAAqB,IAArB;AACA,mBAAKI,UAAL,GAAkB,OAAlB;AACA;;AACF,iBAAK,SAAL;AACE,mBAAKN,eAAL,GAAuB,IAAvB;AACA,mBAAKF,gBAAL,GAAwB,KAAxB;AACA,mBAAKC,eAAL,GAAuB,KAAvB;AACA,mBAAKE,eAAL,GAAuB,KAAvB;AACA,mBAAKC,aAAL,GAAqB,IAArB;AACA,mBAAKI,UAAL,GAAkB,SAAlB;AACA;;AACF,iBAAK,YAAL;AACE,mBAAKL,eAAL,GAAuB,IAAvB;AACA,mBAAKH,gBAAL,GAAwB,KAAxB;AACA,mBAAKC,eAAL,GAAuB,KAAvB;AACA,mBAAKC,eAAL,GAAuB,KAAvB;AACA,mBAAKE,aAAL,GAAqB,IAArB;AACA,mBAAKI,UAAL,GAAkB,YAAlB;AACA;;AACF;AACE;AAlCJ;AAoCD;;;eAED,wBAAe;AACb,cAAM9C,KAAK,GAAG,KAAKC,YAAL,CAAkBC,SAAlB,GAA8BC,KAA9B,CAAoC,GAApC,CAAd;AACA,eAAKC,gBAAL,GAAwBJ,KAAK,CAAC,CAAD,CAAL,CAASK,MAAT,CAAgB,GAAhB,EAAqBA,MAArB,CAA4B,GAA5B,EAAiCA,MAAjC,CAAwCL,KAAK,CAAC,CAAD,CAA7C,CAAxB;;AACA,cAAI,KAAKI,gBAAT,EAA2B;AACzB,iBAAKwC,gBAAL,GAAwB,IAAxB;AACD,WAFD,MAEO;AACL,iBAAKA,gBAAL,GAAwB,KAAxB;AACD;AACF;;;eAED,qBAAY;AACV;AACAtC,iBAAO,CAACC,GAAR,CAAY,eAAZ;AACD;;;eAED,iBAAQ;AACN,eAAKN,YAAL,CAAkBO,KAAlB;AACA,eAAKoC,gBAAL,GAAwB,KAAxB;AACD;;;eAED,kCAAyB;AACvB,cAAMG,aAAa,GAAG;AACpBD,sBAAU,EAAE,KAAKA,UADG;AAEpB1C,4BAAgB,EAAE,KAAKA;AAFH,WAAtB;AAIA,eAAKuC,sBAAL,CAA4BrB,IAA5B,CAAiCyB,aAAjC;AACD;;;;;;;uBAhHUV,2B,EAA2B,+H,EAAA,uH;AAAA,K;;;YAA3BA,2B;AAA2B,+C;AAAA;AAAA;oEAY3B,kE,EAAY,I;;;;;;;;;;;;;;;;;;;;;ADtBzB;;AA4EA;;AAQA;;AAEA;;AAYA;;AACE;;AACE;;AACE;;AACA;;AACE;;AAGF;;AACA;;AACF;;AACF;;AACF;;;;AA9GK;;AA4EqD;;AAAA;;AAQb;;AAAA;;AAEf;;AAAA;;AAiBV;;AAAA;;;;;;;;;sEC7FPA,2B,EAA2B;cALvC,uDAKuC;eAL7B;AACTH,kBAAQ,EAAE,0BADD;AAETC,qBAAW,EAAE,uCAFJ;AAGTC,mBAAS,EAAE,CAAC,uCAAD;AAHF,S;AAK6B,Q;;;;;;;;gBAYrC,uD;iBAAU,kE;;;gBAUV;;;gBACA;;;gBAGA;;;;;;;;;;;;;;;;;;;;ACpCH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAKA,QAAMY,MAAM,GAAW,CACrB;AACEC,UAAI,EAAE,EADR;AAEEvB,eAAS,EAAE;AAFb,KADqB,EAKrB;AACEuB,UAAI,EAAE,yBADR;AAEEC,kBAAY,EAAE;AAAA,eACZ;AAAA;AAAA;AAAA;AAAA,0FAAwEC,IAAxE,CAA6E,UAAAC,CAAC;AAAA,iBAAIA,CAAC,CAACC,iCAAN;AAAA,SAA9E,CADY;AAAA;AAFhB,KALqB,CAAvB;;QAgBaC,mC;;;;;YAAAA;;;;yBAAAA,mC;AAAmC,O;AAAA,gBAHrC,CAAC,6DAAaC,QAAb,CAAsBP,MAAtB,CAAD,CAGqC,EAFpC,4DAEoC;;;;0HAAnCM,mC,EAAmC;AAAA;AAAA,kBAFpC,4DAEoC;AAAA,O;AAFxB,K;;;;;sEAEXA,mC,EAAmC;cAJ/C,sDAI+C;eAJtC;AACRE,iBAAO,EAAE,CAAC,6DAAaD,QAAb,CAAsBP,MAAtB,CAAD,CADD;AAERS,iBAAO,EAAE,CAAC,4DAAD;AAFD,S;AAIsC,Q;;;;;;;;;;;;;;;;;;ACrBhD;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAeaC,4B;;;;;YAAAA;;;;yBAAAA,4B;AAA4B,O;AAAA,gBAH9B,CAAC,4DAAD,EAAe,0DAAf,EAA4B,0DAA5B,EAAyC,wEAAzC,EAA6D,wGAA7D,EAAkG,8EAAlG,CAG8B;;;;0HAA5BA,4B,EAA4B;AAAA,uBAFxB,iFAEwB,EAFA,yFAEA,EAFsB,gHAEtB;AAFiD,kBAD9E,4DAC8E,EADhE,0DACgE,EADnD,0DACmD,EADtC,wEACsC,EADlB,wGACkB,EADmB,8EACnB;AAEjD,O;AAHoF,K;;;;;sEAGhHA,4B,EAA4B;cAJxC,sDAIwC;eAJ/B;AACRF,iBAAO,EAAE,CAAC,4DAAD,EAAe,0DAAf,EAA4B,0DAA5B,EAAyC,wEAAzC,EAA6D,wGAA7D,EAAkG,8EAAlG,CADD;AAERG,sBAAY,EAAE,CAAC,iFAAD,EAAyB,yFAAzB,EAA+C,gHAA/C;AAFN,S;AAI+B,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACgBjC;;AACE;;AACF;;;;;;AAF2E;;AACzE;;AAAA;;;;;;AAKN;;AACE;;AAAI;;AAAiB;;AACvB;;;;;;AACA;;AAAiF;;AAAwC;;;;;;AAAxC;;AAAA;;;;;;AAEjF;;AACE;;AAAI;;AAA2B;;AACjC;;;;;;AACA;;AAAgF;;AAAgC;;;;;;AAAhC;;AAAA;;;;;;AAEhF;;AACE;;AAAI;;AAAkB;;AACxB;;;;;;AACA;;AAAgF;;AAAsB;;;;;;AAAtB;;AAAA;;;;;;AAEhF;;AACE;;AAAI;;AAAK;;AACX;;;;;;AACA;;AAAgF;;AAAqB;;;;;;AAArB;;AAAA;;;;;;;;AAahF;;AACE;;AACE;;AAAI;;AAA+B;;AACrC;;AACA;;AACE;;AACE;;AACE;;AACA;;AACE;;AAA6B;AAAA;;AAAA;;AAAA;AAAA;;AAAyC;;AAAS;;AACjF;;AACA;;AACF;;AAEA;;AACE;;AACA;;AACE;;AAA6D;AAAA;;AAAA;;AAAA;AAAA;;AAAqC;;AAAW;;AAC/G;;AACA;;AACF;;AACF;;AACF;;AACF;;;;;;AANqC;;AAAA;;;;;;;;AASnC;;AAAkB;AAAA;;AAAA;;AAAA;AAAA;;AAA4E;;;;;;;;AAC9F;;AAGE;AAAA;;AAAA;;AAAA;AAAA;;AAGF;;;;;;AALE,oHAA0C,qBAA1C,EAA0C,mBAA1C;;;;;;;;AAtCN;;AACE;;AACE;;AACE;;AACE;;AAAwB;;AAA+C;;AACvE;;AAAuC;AAAA;;AAAA;;AAAA;AAAA;;AAAyC;;AAClF;;AACF;;AACF;;AAEA;;AAyBA;;AACE;;AACA;;AAOF;;AACF;;;;;;AAzCgC;;AAAA;;AACZ;;AAAA;;AAKO;;AAAA;;AA0BiD;;AAAA;;AAKtE;;AAAA;;;;QCjFKC,sB;AA+BX,sCACUC,QADV,EAEU9E,YAFV,EAGUC,MAHV,EAIUF,OAJV,EAKUG,GALV,EAMU6E,YANV,EAOUC,WAPV,EAQUC,oBARV,EASUC,mBATV,EAUU/E,eAVV,EAWUC,SAXV,EAYUC,eAZV,EAY0C;AAAA;;AAXhC,aAAAyE,QAAA,GAAAA,QAAA;AACA,aAAA9E,YAAA,GAAAA,YAAA;AACA,aAAAC,MAAA,GAAAA,MAAA;AACA,aAAAF,OAAA,GAAAA,OAAA;AACA,aAAAG,GAAA,GAAAA,GAAA;AACA,aAAA6E,YAAA,GAAAA,YAAA;AACA,aAAAC,WAAA,GAAAA,WAAA;AACA,aAAAC,oBAAA,GAAAA,oBAAA;AACA,aAAAC,mBAAA,GAAAA,mBAAA;AACA,aAAA/E,eAAA,GAAAA,eAAA;AACA,aAAAC,SAAA,GAAAA,SAAA;AACA,aAAAC,eAAA,GAAAA,eAAA;AA1CV,aAAA8E,IAAA,GAAc,EAAd;AAEA,aAAAxB,aAAA,GAAgB,KAAhB;AAGA,aAAAyB,eAAA,GAAyB,EAAzB;AAEA,aAAAC,cAAA,GAAsB,IAAtB;AACA,aAAAC,aAAA,GAAgB,KAAhB;AAIA,aAAAC,oBAAA,GAAuB,KAAvB;AAIA,aAAA3E,aAAA,GAAgB,EAAhB;AAUA,aAAA4E,WAAA,GAAqB,EAArB;AAEA,aAAAC,WAAA,GAAmB,EAAnB;AAeI;;;;eAEE,4BAAmB;;;;;;;AACF,yBAAM,KAAKC,QAAL,EAAN;;;AAAfC,8B;;;;;;;;AACP;;;eAED,oBAAW;AACT,eAAKP,eAAL,GAAuBQ,IAAI,CAACC,KAAL,CAAWC,cAAc,CAACC,eAA1B,EAA2CC,eAAlE;AACAzE,iBAAO,CAACC,GAAR,CAAY,cAAZ,EAA4B,KAAK4D,eAAjC;AACA,eAAKD,IAAL,GAAY,KAAKC,eAAjB;AACA,eAAKtE,WAAL;AACD;;;eAEK,uBAAc;;;;;;AACC,yBAAM,KAAKf,OAAL,CAAagB,GAAb,CAAiB,QAAjB,CAAN;;;AAAnB,uBAAKC,W;AACLO,yBAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgC,KAAKR,WAArC;;;;;;;;AACD;;;eAEK,mCAA0B;;;;;;;;AAGxBiF,qC,GAAsB,SAAtBA,mBAAsB,CAAAd,IAAI,EAAI;AAClCe,yBAAK,GAAGf,IAAR;AACD,mB;;AAEKgB,yC,GAA0B,SAA1BA,uBAA0B,GAAM;AACpCnD,gCAAY,GAAG,IAAf;AACD,mB;;;AAEa,yBAAM,KAAK3C,eAAL,CAAqBqC,MAArB,CAA4B;AAC9C0D,4BAAQ,EAAE,iBADoC;AAE9CC,mCAAe,EAAE,KAF6B;AAG9CC,wBAAI,EAAE,KAHwC;AAI9C;AACAC,0BAAM,wIAAkH,KAAKC,WAAL,CAAiBC,MAAnI,CALwC;AAM9CC,0BAAM,EAAE,CACN;AACEC,0BAAI,EAAE,uBADR;AAEEC,0BAAI,EAAE,KAFR;AAGEC,iCAAW,EAAE;AAHf,qBADM,CANsC;AAa9CC,2BAAO,EAAE,CACP;AACEC,0BAAI,EAAE,iBADR;AAEEC,6BAAO,EAAEb;AAFX,qBADO,EAKP;AACEY,0BAAI,EAAE,SADR;AAEEC,6BAAO,EAAEf;AAFX,qBALO,EASP;AACEc,0BAAI,EAAE,UADR;AAEEE,0BAAI,EAAE,QAFR;AAGEb,8BAAQ,EAAE,WAHZ;AAIEY,6BAAO,EAAE,mBAAM;AACbzF,+BAAO,CAACC,GAAR,CAAY,gBAAZ;AACD;AANH,qBATO;AAbqC,mBAA5B,CAAN;;;AAAR0F,uB;AAiCNA,uBAAK,CAACC,YAAN,GAAqB/C,IAArB,CAA0B;AAAA,2BAAY;AAAA;AAAA;AAAA;AAAA;AAAA,iCAChC8B,KADgC;AAAA;AAAA;AAAA;;AAElC,gCAAI,KAAKM,WAAT,EAAsB;AACpB,mCAAKlB,aAAL,GAAqB,IAArB;;AACA,kCAAI,KAAKkB,WAAL,CAAiBY,kBAAjB,KAAwClB,KAAK,CAACmB,qBAAlD,EAAyE;AACvE,qCAAKC,gBAAL,GAAwBpB,KAAK,CAACmB,qBAA9B;AACA,qCAAK9B,oBAAL,GAA4B,IAA5B;AACD,+BAHD,MAGO;AACL,qCAAKgC,YAAL,CAAkB,UAAlB,EAA8B,gEAA9B;AACA,qCAAKjC,aAAL,GAAqB,KAArB;AACD;AACF,6BATD,MASO;AACL,mCAAKiC,YAAL,CAAkB,QAAlB,EAA4B,mDAA5B;AACD;;AAbiC;AAAA;;AAAA;AAAA,iCAe9BvE,YAf8B;AAAA;AAAA;AAAA;;AAAA,iCAgB5B,KAAKwD,WAhBuB;AAAA;AAAA;AAAA;;AAiBxBgB,wCAjBwB,GAiBT,KAAKC,eAAL,EAjBS;;AAAA,iCAkB1BD,YAlB0B;AAAA;AAAA;AAAA;;AAmBtBE,qCAnBsB,GAmBV9B,IAAI,CAACC,KAAL,CAAWC,cAAc,CAACC,eAA1B,EAA2C4B,EAnBjC;AAoBtBC,yCApBsB,GAoBN,KAAKpB,WAAL,CAAiBmB,EApBX;AAqB5B,iCAAKE,cAAL,CAAoB,uCAApB;AArB4B;AAsBN,mCAAM,KAAK3C,mBAAL,CAAyB4C,0BAAzB,CAAoDF,aAApD,EAAmEF,SAAnE,EAA8EK,SAA9E,EAAN;;AAtBM;AAsBtBC,yCAtBsB;;AAuB5B,gCAAIA,aAAJ,EAAmB;AACjB,mCAAKT,YAAL,CAAkB,SAAlB,iEAA+E,KAAKf,WAAL,CAAiBC,MAAhG;AACA,mCAAKwB,OAAL,CAAaC,OAAb;AACD,6BAHD,MAGO;AACL,mCAAKX,YAAL,CAAkB,OAAlB,4EAAqF,KAAKf,WAAL,CAAiBC,MAAtG;AACA,mCAAKwB,OAAL,CAAaC,OAAb;AACD;;AA7B2B;AAAA;;AAAA;AA+B5B,iCAAKX,YAAL,CAAkB,QAAlB,EAA4B,gEAA5B;;AA/B4B;AAAA;AAAA;;AAAA;AAkC9B,iCAAKA,YAAL,CAAkB,QAAlB,EAA4B,mDAA5B;;AAlC8B;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAZ;AAAA,mBAA1B;;AAwCA,yBAAML,KAAK,CAACnE,OAAN,EAAN;;;;;;;;AACD;;;eAED,kBAASoF,KAAT,EAAgB;AACd,eAAK3B,WAAL,GAAmB2B,KAAK,CAACC,MAAN,CAAaC,KAAhC,CADc,CAEd;AACD;;;eAED,4BAAmBC,MAAnB,EAA2B;AACzB,cAAMC,iBAAiB,GAAG,IAAIC,IAAJ,EAA1B;;AAEA,cAAI,KAAKnD,cAAL,KAAwB,IAA5B,EAAkC;AAChC,iBAAKA,cAAL,GAAsB,KAAtB;AACA,gBAAMtB,UAAU,GAAGuE,MAAM,CAACvE,UAAP,CAAkB0E,MAAlB,CAAyB,CAAzB,CAAnB;AACA,iBAAKC,YAAL,GAAoB;AAClBC,+BAAiB,EAAE,KAAKnC,WAAL,CAAiBoC,MADlB;AAElBC,2BAAa,EAAE,KAAKrC,WAAL,CAAiBmB,EAFd;AAGlBmB,sCAAwB,EAAE,KAAKtC,WAAL,CAAiBuC,wBAHzB;AAIlBC,wCAA0B,EAAE,KAAKxC,WAAL,CAAiByC,eAJ3B;AAKlBlH,mBAAK,EAAE,KAAKyE,WAAL,CAAiBzE,KALN;AAMlBmH,qBAAO,EAAE,KAAK7D,cANI;AAOlB8D,wBAAU,EAAEpF,UAPM;AAQlBqF,uBAAS,EAAEd,MAAM,CAACjH,gBARA;AASlBgI,+BAAiB,EAAEd;AATD,aAApB;AAWA,iBAAKvI,YAAL,CAAkBsJ,YAAlB,CAA+B,KAAKZ,YAApC;AACA,iBAAKzI,MAAL,CAAYsJ,aAAZ,CAA0B,mGAA1B;AACD,WAhBD,MAgBO;AACL,iBAAKlE,cAAL,GAAsB,IAAtB;AACA,iBAAKqD,YAAL,GAAoB;AAClBC,+BAAiB,EAAE,KAAKnC,WAAL,CAAiBoC,MADlB;AAElBC,2BAAa,EAAE,KAAKrC,WAAL,CAAiBmB,EAFd;AAGlBmB,sCAAwB,EAAE,KAAKtC,WAAL,CAAiBuC,wBAHzB;AAIlBC,wCAA0B,EAAE,KAAKxC,WAAL,CAAiByC,eAJ3B;AAKlBlH,mBAAK,EAAE,KAAKyE,WAAL,CAAiBzE,KALN;AAMlBmH,qBAAO,EAAE,KAAK7D,cANI;AAQlB1D,kCAAoB,EAAE2G,MAAM,CAAC3G,oBARX;AASlB6H,oCAAsB,EAAElB,MAAM,CAACzG,uBATb;AAUlB4H,qCAAuB,EAAEnB,MAAM,CAACjG,mBAVd;AAWlBD,6BAAe,EAAEkG,MAAM,CAAClG,eAXN;AAYlBsH,sBAAQ,EAAEpB,MAAM,CAACvG,KAZC;AAalB4H,4BAAc,EAAErB,MAAM,CAACtG,WAbL;AAclBoH,uBAAS,EAAEd,MAAM,CAACjH,gBAdA;AAelBgI,+BAAiB,EAAEd;AAfD,aAApB;AAiBA,iBAAKvI,YAAL,CAAkBsJ,YAAlB,CAA+B,KAAKZ,YAApC;AACA,iBAAKkB,QAAL;AACD;AACF;;;eAED,4BAAmBzB,KAAnB,EAA0B;AACxB,cAAIA,KAAK,CAACC,MAAN,CAAayB,OAAb,KAAyB,IAA7B,EAAmC;AACjC,iBAAKlG,aAAL,GAAqB,IAArB;AACA,iBAAK0B,cAAL,GAAsB,IAAtB;AACD,WAHD,MAGO;AACL,iBAAK1B,aAAL,GAAqB,KAArB;AACA,iBAAK0B,cAAL,GAAsB,IAAtB;AACD;AACF;;;eAEK,wBAAe;;;;;;AACnB;AACM7C,0B,GAAW,KAAKxC,YAAL,CAAkByC,oBAAlB,E;;AACH,yBAAM,KAAKrC,SAAL,CAAesC,MAAf,CAAsB;AACxCC,6BAAS,EAAE,+HAD6B;AAExCC,kCAAc,EAAE;AACdC,0BAAI,EAAEL;AADQ;AAFwB,mBAAtB,CAAN;;;AAARM,uB;AAONA,uBAAK,CAACC,OAAN;;;;;;;;AACD;;;eAEK,oBAAW;;;;;;;;;AACTyE,8B,GAAe,KAAKC,eAAL,E;AACftF,6B,GAAc,KAAKnB,WAAL,CAAiBmB,W;AACrC,uBAAK2H,sBAAL,GAA8B,KAAK9J,YAAL,CAAkB+J,kBAAlB,CAAqC5H,WAArC,CAA9B;AACM6H,uB,GAAQ,KAAKC,QAAL,E;;uBAEVzC,Y;;;;;;AACF,yBAAM,KAAKK,cAAL,CAAoB,8BAApB,CAAN;;;;AACmB,yBAAM,KAAK5C,oBAAL,CAA0BiF,gBAA1B,CAA2C,KAAKJ,sBAAhD,EAAwE/B,SAAxE,EAAN;;;AAAfoC,8B;AACJA,8BAAY,GAAGA,YAAY,CAAC/I,KAAb,CAAmB,GAAnB,CAAf;;wBAEI+I,YAAY,CAAC,CAAD,CAAZ,KAAoB,MAApB,IAA8BA,YAAY,CAAC,CAAD,CAAZ,KAAoB,I;;;;;yDACpCH,K;;;;;;;;;;;AAALI,mB;AACHC,sB,GAAO,MAAH,OAAG,CAAH,kBAAQD,CAAR,CAAG,EAAM;AAAEE,mCAAe,EAAE,CAACH,YAAY,CAAC,CAAD;AAAhC,mBAAN,C;;AACb,yBAAM,KAAKlF,oBAAL,CAA0BsF,sBAA1B,CAAiDF,IAAjD,EAAuDtC,SAAvD,EAAN;;;;;;;;;;;;;;;;;;;;;;;;wBAGE,KAAK+B,sBAAL,IAA+B,KAAKA,sBAAL,CAA4BU,SAA3D,IAAwE,KAAKV,sBAAL,CAA4BU,SAA5B,CAAsCC,MAAtC,GAA+C,C;;;;;0DACvG,KAAKX,sBAAL,CAA4BU,S;;;;;;;;;;;AAAnCE,qB;AACHC,8C,GAA+BD,GAAG,CAAC/C,E,EAEzC;;AACMiD,iC,GAA6C;AAAEC,oDAAgC,EAAEF;AAApC,mB;;AACnD,yBAAM,KAAK1F,oBAAL,CAA0B6F,+BAA1B,CAA0DF,eAA1D,EAA2E7C,SAA3E,EAAN;;;;;;;;;;;;;;;;;;;;;;;;AAIJ,uBAAKhD,YAAL,CAAkBgG,MAAlB,GAA2B,EAA3B;;AACyB,yBAAM,KAAKhL,OAAL,CAAagB,GAAb,CAAiB,kBAAjB,CAAN;;;AAAnBiK,kC;;;;;;AAGEC,6C,GAAsBD,gBAAgB,CAACE,CAAD,CAAhB,CAAoBC,wB;AAC1CC,6B,GAAM,E;AAEZH,6CAAmB,CAACI,OAApB,CAA4B,UAAAC,OAAO,EAAI;AACrC,gCAAMC,WAAW,GAAGD,OAAO,CAAC3D,EAA5B;AACA,gCAAM6D,SAAS,GAAG,MAAI,CAAC1B,sBAAL,CAA4BU,SAA9C;AACA,gCAAMiB,KAAK,GAAGD,SAAS,CAACE,SAAV,CAAoB,UAAAC,CAAC;AAAA,qCAAIA,CAAC,CAAChE,EAAF,KAAS4D,WAAb;AAAA,6BAArB,CAAd;;AAEA,gCAAIE,KAAK,GAAG,CAAC,CAAb,EAAgB;AACdL,iCAAG,CAACQ,IAAJ,CAASL,WAAT;AACD;AACF,2BARD;AAUAP,0CAAgB,CAACE,CAAD,CAAhB,CAAoBC,wBAApB,GAA+CF,mBAAmB,CAACY,MAApB,CAA2B,UAAAC,CAAC;AAAA,mCAAI,CAACV,GAAG,CAACW,IAAJ,CAAS,UAAAC,EAAE;AAAA,qCAAIA,EAAE,KAAKF,CAAC,CAACnE,EAAb;AAAA,6BAAX,CAAL;AAAA,2BAA5B,CAA/C;;;;;;;;AAdOuD,mB,GAAI,C;;;wBAAGA,CAAC,GAAGF,gBAAgB,CAACP,M;;;;;;;;AAAQS,mBAAC,E;;;;;AAiB9C,uBAAKnL,OAAL,CAAakM,GAAb,CAAiB,kBAAjB,EAAqCjB,gBAArC;AACA,uBAAKkB,YAAL,CAAkB,KAAKpC,sBAAL,CAA4BqC,eAA9C;AACA,uBAAK5E,YAAL,CAAkB,UAAlB,EAA8B,kCAA9B;AACA,uBAAKtH,MAAL,CAAYsJ,aAAZ,CAA0B,YAA1B;;;;;AAEA,uBAAKhC,YAAL,CAAkB,OAAlB,EAA2B,sCAA3B;;;AAEF,uBAAKU,OAAL,CAAaC,OAAb;;;;;AAEMkE,kC,GAAmB,E;AACnBC,qC,GAAsB,KAAKrM,YAAL,CAAkByC,oBAAlB,E;AACtB6J,0B,GAAW1G,IAAI,CAACC,KAAL,CAAWC,cAAc,CAACC,eAA1B,C;;;;;;AAGTwG,iD,GAA0BD,QAAQ,CAACnB,wBAAT,CAAkCD,EAAlC,EAAqCK,W;AAC/DiB,kC,GAAWH,mBAAmB,CAACI,UAApB,CAA+BV,IAA/B,CAAoC,UAAAT,OAAO;AAAA,mCAAIA,OAAO,CAACC,WAAR,KAAwBgB,uBAA5B;AAAA,2BAA3C,C;;AAEjB,8BAAIC,QAAJ,EAAc;AACZA,oCAAQ,CAACE,aAAT,GAAyB,YAAzB;AACAN,4CAAgB,CAACR,IAAjB,CAAsBY,QAAtB;AACD,2BAHD,MAGO;AACLJ,4CAAgB,CAACR,IAAjB,CAAsBU,QAAQ,CAACnB,wBAAT,CAAkCD,EAAlC,CAAtB;AACD;;;;;;;;AATMA,oB,GAAI,C;;;wBAAGA,EAAC,GAAGoB,QAAQ,CAACnB,wBAAT,CAAkCV,M;;;;;;;;AAAQS,oBAAC,E;;;;;AAY/DoB,0BAAQ,CAACnB,wBAAT,GAAoCiB,gBAApC;AACMO,uC,GAAwB/G,IAAI,CAACgH,SAAL,CAAeN,QAAf,C;AAC9BxG,gCAAc,CAAC+G,OAAf,CAAuB,iBAAvB,EAA0CF,qBAA1C;AACMzC,kC,GAAmB,KAAKlK,YAAL,CAAkB8M,iBAAlB,CAAoC9C,KAApC,C;;AAEzB,sBAAIE,gBAAJ,EAAsB;AACpB,yBAAKgC,YAAL,CAAkB,KAAKpC,sBAAL,CAA4BqC,eAA9C;AAEA,yBAAK5E,YAAL,CACE,UADF,EAEE,8GAFF;AAKA,yBAAKtH,MAAL,CAAYsJ,aAAZ,CAA0B,YAA1B;AACD;;;;;;;;AAEJ;;;eAEK,oBAAW;;;;;;;;;AACTwD,sC,GAAuB,KAAK/M,YAAL,CAAkBgN,U;;;;;;AAGvCC,uC,GAAgBF,oBAAoB,CAAC7B,CAAD,CAApB,CAAwB+B,a;AACxC1B,qC,GAAcwB,oBAAoB,CAAC7B,CAAD,CAApB,CAAwBK,W;AACtC2B,uC,GAAgBH,oBAAoB,CAAC7B,CAAD,CAApB,CAAwBiC,e;;;AAG5C,iCAAM,iEAAWzH,QAAX,CAAoB;AACxBxB,gCAAI,YAAKqH,WAAL,cAAoB0B,aAApB,CADoB;AAExBG,qCAAS,EAAE,gEAAUC;AAFG,2BAApB,EAGHjJ,IAHG,CAGE,UAAAe,IAAI,EAAI;AACd,gCAAMmI,MAAM,GAAGJ,aAAa,CAAC5L,MAAd,CAAqB,GAArB,EAA0BA,MAA1B,CAAiC6D,IAAI,CAACA,IAAtC,CAAf;AACA,gCAAMoI,aAAa,GAAG;AACpBC,yDAA2B,EAAEjC,WADT;AAEpBkC,yCAAW,EAAEV,oBAAoB,CAAC7B,CAAD,CAApB,CAAwBwC,aAFjB;AAGpBC,oCAAM,EAAEL;AAHY,6BAAtB;;AAKA,kCAAI,CAAC9H,WAAL,CAAiBoG,IAAjB,CAAsB2B,aAAtB;AACD,2BAXK,CAAN;;;;;;;;;AAaAhM,iCAAO,CAACC,GAAR;;;;;;;;AAnBK0J,mB,GAAI,C;;;wBAAGA,CAAC,GAAG6B,oBAAoB,CAACtC,M;;;;;;;;AAAQS,mBAAC,E;;;;;;;;;;AAsBnD;;;eAED,sBAAa;AACX,cAAMuB,UAAU,GAAG,KAAKzM,YAAL,CAAkBgN,UAArC;;AAEA,eAAK,IAAI9B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGuB,UAAU,CAAChC,MAA/B,EAAuCS,CAAC,EAAxC,EAA4C;AAC1C,gBAAM+B,aAAa,GAAGR,UAAU,CAACvB,CAAD,CAAV,CAAc+B,aAApC;AACA,gBAAM1B,WAAW,GAAGkB,UAAU,CAACvB,CAAD,CAAV,CAAcK,WAAlC;;AAEA,gBAAI;AACF,+EAAWqC,UAAX,CAAsB;AACpB1J,oBAAI,YAAKqH,WAAL,cAAoB0B,aAApB,CADgB;AAEpBG,yBAAS,EAAE,gEAAUC;AAFD,eAAtB;AAID,aALD,CAKE,WAAM,CAAE;AACX;AACF;;;eAED,2BAAkB;AAChB,cAAMQ,MAAM,GAAG,KAAK3N,GAAL,CAAS4N,gBAAT,EAAf;;AAEA,cAAID,MAAM,KAAK,wFAAqBE,OAApC,EAA6C;AAC3C,iBAAKC,YAAL;AACD;;AAED,iBAAOH,MAAM,KAAK,wFAAqBI,MAAvC;AACD;;;eAEK,wBAAeC,OAAf,EAAwB;;;;;;AACb,yBAAM,KAAKlJ,WAAL,CAAiBtC,MAAjB,CAAwB;AAC3C4D,wBAAI,EAAE,KADqC;AAE3C4H,2BAAO,EAAPA;AAF2C,mBAAxB,CAAN;;;AAAf,uBAAKjG,O;qDAIE,KAAKA,OAAL,CAAalF,OAAb,E;;;;;;;;AACR;;;eAEK,wBAAe;;;;;;;AACL,yBAAM,KAAK5C,eAAL,CAAqBuC,MAArB,CAA4B;AAC9CwL,2BAAO,EAAE,mCADqC;AAE9CC,4BAAQ,EAAE;AAFoC,mBAA5B,CAAN;;;AAARC,uB;AAINA,uBAAK,CAACrL,OAAN;;;;;;;;AACD;;;eAEK,sBAAasL,MAAb,EAAqBC,YAArB,EAAmC;;;;;;;AACzB,yBAAM,KAAKjO,eAAL,CAAqBqC,MAArB,CAA4B;AAC9C6D,0BAAM,EAAE8H,MADsC;AAE9ChI,mCAAe,EAAE,KAF6B;AAG9CC,wBAAI,EAAE,KAHwC;AAI9C4H,2BAAO,EAAEI,YAJqC;AAK9CxH,2BAAO,EAAE,CAAC,SAAD;AALqC,mBAA5B,CAAN;;;AAARI,uB;AAQNA,uBAAK,CAACC,YAAN;;AAEA,yBAAMD,KAAK,CAACnE,OAAN,EAAN;;;;;;;;AACD;AAED;;;;;;;;eAKc,sBAAaoL,QAAb,EAA6B;;;;;;AACnCI,oB,GAAK,uC;AACLC,yB,GAAUD,EAAE,CAACE,IAAH,CAAQN,QAAR,C;;sBAEXK,O;;;;;;;;AAICE,yB,GAAU,CAACF,OAAO,CAAC,CAAD,CAAR,GAAc,EAAd,GAAmB,CAACA,OAAO,CAAC,CAAD,C;;AAC3C,yBAAM,KAAKxO,YAAL,CAAkB2O,iBAAlB,CAAoCD,OAApC,CAAN;;;;;;;;AACD;;;eAEO,oBAAQ;AAAA;;AACd,cAAM1E,KAAK,GAAU,EAArB;AACA,cAAM4E,gBAAgB,GAAG,KAAK5O,YAAL,CAAkB6O,mBAAlB,EAAzB;;AAEA,eAAK,IAAI3D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK1F,WAAL,CAAiBiF,MAArC,EAA6CS,CAAC,EAA9C,EAAkD;AAChD,gBAAM4D,cAAc,GAAG,KAAKtJ,WAAL,CAAiB0F,CAAjB,CAAvB;AACAlB,iBAAK,CAAC4B,IAAN,CAAWkD,cAAX;AACD;;AAED,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,gBAAgB,CAACnE,MAArC,EAA6CsE,CAAC,EAA9C,EAAkD;AAChD,gBAAMzD,OAAO,GAAGsD,gBAAgB,CAACG,CAAD,CAAhC;AAEAzD,mBAAO,CAACD,OAAR,CAAgB,UAAM2D,SAAN;AAAA,qBAAmB;AAAA;AAAA;AAAA;AAAA;AAC3BC,oCAD2B,GACV;AACrBzB,mDAA2B,EAAEwB,SAAS,CAACzD,WADlB;AAErBkC,mCAAW,EAAEuB,SAAS,CAACE,aAFF;AAGrB5B,8BAAM,EAAE0B,SAAS,CAACG,IAAV,CAAeC;AAHF,uBADU;AAOjCpF,2BAAK,CAAC4B,IAAN,CAAWqD,cAAX;;AAPiC;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAnB;AAAA,aAAhB;AASD;;AAED,eAAKI,UAAL;AAEA,iBAAOrF,KAAP;AACD;;;;;;;uBApbUnF,sB,EAAsB,wH,EAAA,4I,EAAA,uH,EAAA,uH,EAAA,kJ,EAAA,2J,EAAA,iI,EAAA,+K,EAAA,kM,EAAA,+H,EAAA,+H,EAAA,+H;AAAA,K;;;YAAtBA,sB;AAAsB,+C;AAAA,e;AAAA,c;AAAA,8qC;AAAA;AAAA;ADlBnC;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;;AACF;;AACF;;AACF;;AACA;;AACE;;AAA0B;;AAA8B;;AAC1D;;AACF;;AACF;;AACF;;AAEA;;AACE;;AACE;;AACE;;AAAI;;AAAyB;;AAC/B;;AACA;;AACE;;AAEE;AAAA;AAAA;;AAMA;;AAGF;;AACF;;AAEA;;AAGA;;AAEA;;AAGA;;AAEA;;AAGA;;AAEA;;AAGA;;AACF;;AAEA;;AA8CF;;;;AA/EQ;;AAAA;;AAMmB;;AAAA;;AAMK;;AAAA;;AAGgC;;AAAA;;AAEhC;;AAAA;;AAGgC;;AAAA;;AAEhC;;AAAA;;AAGgC;;AAAA;;AAEhC;;AAAA;;AAGgC;;AAAA;;AAGhD;;AAAA;;;;;;;;;sECxCHA,sB,EAAsB;cALlC,uDAKkC;eALxB;AACT1B,kBAAQ,EAAE,0BADD;AAETC,qBAAW,EAAE,kCAFJ;AAGTC,mBAAS,EAAE,CAAC,kCAAD;AAHF,S;AAKwB,Q","file":"survey-and-signature-survey-and-signature-module-es5.js","sourcesContent":["<div>\n  <div>\n    <ion-grid>\n      <ion-row>\n        <ion-col size=\"1\"></ion-col>\n        <ion-col size=\"10\">\n          <ion-button color=\"tertiary\" (click)=\"verification()\" expand=\"block\"> Ver Acta </ion-button>\n        </ion-col>\n        <ion-col size=\"1\"></ion-col>\n      </ion-row>\n    </ion-grid>\n  </div>\n\n  <div>\n    <h3>Responsable de ARL</h3>\n    <p *ngIf=\"infoUserARL\"><strong>Responsable ARL: </strong> {{ infoUserARL.nombres }} {{ infoUserARL.apellidos }}</p>\n  </div>\n\n  <div>\n    <h3>Razón social del proveedor</h3>\n    <p *ngIf=\"infoUserARL\"><strong>Nombre proveedor: </strong> {{ infoUserARL.nombreProveedor }}</p>\n    <p *ngIf=\"infoUserARL\"><strong>Documento proveedor: </strong> {{ infoUserARL.idProveedor }}</p>\n  </div>\n\n  <div class=\"ion-text-center\">\n    <h4>Firma responsable de ARL</h4>\n  </div>\n  <div style=\"border: 1px solid black; border-radius: 10px\" class=\"firmaContent\">\n    <signature-pad [options]=\"signaturePadOptions\" (onBeginEvent)=\"drawStart()\" (onEndEvent)=\"drawComplete()\"> </signature-pad>\n    <div class=\"ion-text-center\">\n      <p class=\"firma\" *ngIf=\"infoUserARL\">{{ infoUserARL.nombres }} {{ infoUserARL.apellidos }}</p>\n    </div>\n  </div>\n  <ion-button (click)=\"clear()\" expand=\"block\" fill=\"clear\" shape=\"round\"> Borrar </ion-button>\n\n  <div class=\"ion-text-justify\">\n    <p>\n      Al enviar, está autorizando el uso de la su firma ÚNICAMENTE para el registro de la ejecución de las actividades relacionadas en el\n      acta de asesoría en promoción y prevención de POSITIVA COMPAÑÍA DE SEGUROS S.A. La Política de tratamiento de la información la puede\n      consultar en https://www.positiva.gov.co Una vez sea enviado el formulario, recibirá correo electrónico con los soportes de ejecución.\n    </p>\n  </div>\n\n  <div class=\"ion-text-center\" style=\"margin-bottom: 30px\">\n    <ion-grid>\n      <ion-row>\n        <ion-col size=\"3\"></ion-col>\n        <ion-col size=\"6\">\n          <img *ngIf=\"disableBtnSendTask\" (click)=\"sendInfoSignatureQR()\" src=\"../../../assets/icon/boton_enviar.png\" alt=\"enviar\" />\n        </ion-col>\n        <ion-col size=\"3\"></ion-col>\n      </ion-row>\n    </ion-grid>\n  </div>\n</div>\n","import { Component, EventEmitter, OnInit, Output, ViewChild } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AlertController, ModalController, ToastController } from '@ionic/angular';\nimport { Storage } from '@ionic/storage';\nimport { SignaturePad } from 'angular2-signaturepad';\nimport { AdvisoryVerificationComponent } from '../../../components/advisory-verification/advisory-verification.component';\nimport { CacheService } from '../../../services/cache/cache.service';\nimport { NetworkService } from '../../../services/network/network.service';\n\n@Component({\n  selector: 'app-signature-qr',\n  templateUrl: './signature-qr.component.html',\n  styleUrls: ['./signature-qr.component.scss'],\n})\nexport class SignatureQRComponent implements OnInit {\n  @ViewChild(SignaturePad) signaturePad: SignaturePad;\n\n  // tslint:disable-next-line: ban-types\n  public signaturePadOptions: Object = {\n    maxWidth: 1,\n    minWidth: 1,\n    canvasWidth: 300,\n    canvasHeight: 300,\n  };\n\n  disableBtnSendTask = false;\n\n  infoUserARL: any;\n  signatureEntered: any;\n\n  valueNetwork: any;\n\n  actasAsesoria = [];\n\n  @Output() infoEnteredSignatureQR = new EventEmitter();\n\n  constructor(\n    private storage: Storage,\n    private cacheService: CacheService,\n    private router: Router,\n    private net: NetworkService,\n    private toastController: ToastController,\n    private modalCtrl: ModalController,\n    private alertController: AlertController\n  ) {}\n\n  ngOnInit() {\n    this.getInfoUser();\n  }\n\n  async getInfoUser() {\n    this.infoUserARL = await this.storage.get('sesion');\n  }\n\n  drawComplete() {\n    // will be notified of szimek/signature_pad's onEnd event\n    const firma = this.signaturePad.toDataURL().split(',');\n    this.signatureEntered = firma[0].concat(',').concat(' ').concat(firma[1]);\n    if (this.signatureEntered) {\n      this.disableBtnSendTask = true;\n    } else {\n      this.disableBtnSendTask = false;\n    }\n  }\n\n  drawStart() {\n    // will be notified of szimek/signature_pad's onBegin event\n    console.log('begin drawing');\n  }\n\n  clear() {\n    this.signaturePad.clear();\n    this.disableBtnSendTask = false;\n  }\n\n  sendInfoSignatureQR() {\n    const infoSignatureQR = {\n      nombreResponsableARL: this.infoUserARL.nombres,\n      apellidosResponsableARL: this.infoUserARL.apellidos,\n      cargo: this.infoUserARL.cargo,\n      licenciaSST: this.infoUserARL.idLicenciaSst,\n      numeroDocumentoEmpresa: this.infoUserARL.idProveedor,\n      nombreProveedor: this.infoUserARL.nombreProveedor,\n      documentoUsuarioARL: this.infoUserARL.idPersona,\n      signatureEntered: this.signatureEntered,\n    };\n    this.infoEnteredSignatureQR.emit(infoSignatureQR);\n  }\n\n  async verification() {\n    // this.router.navigateByUrl('/u/execLog/pending-visits/visit-id/company-info/comments/survey-signature/advisoryVerification');\n    const infoActa = this.cacheService.getAllInfoToAdvisory();\n    const modal = await this.modalCtrl.create({\n      component: AdvisoryVerificationComponent,\n      componentProps: {\n        info: infoActa,\n      },\n    });\n\n    modal.present();\n  }\n}\n","<div *ngIf=\"verificationCodeInput\">\n  <div class=\"ion-text-center\">\n    <h3>Encuesta</h3>\n  </div>\n  <div class=\"ion-text-justify\">\n    <p>De acuerdo a su percepción del servicio recibido por POSITIVA COMPAÑIA DE SEGUROS S.A, agradecemos su calificación.</p>\n  </div>\n  <div>\n    <!-- <ion-radio-group (ionChange)=\"radioSelected($event)\"  [(ngModel)]=\"something\"> -->\n    <ion-radio-group>\n      <ion-row>\n        <ion-col>\n          <ion-item lines=\"none\" (click)=\"radioSelected('Excelente')\">\n            <ion-label class=\"imgSinSeleccionar\">Excelente</ion-label>\n            <!-- <ion-radio mode=\"md\" item-left value=\"Excelente\"></ion-radio> -->\n            <ion-avatar>\n              <!-- <img class=\"imgSinSeleccionar\" src=\"../../../assets/icon/img1.png\" alt=\"imgExcelente\"> -->\n              <img\n                [ngClass]=\"pollSelectedExce ? 'imgSeleccionadaExcBue' : 'imgSinSeleccionar'\"\n                src=\"../../../assets/icon/img1.png\"\n                alt=\"imgExcelente\"\n              />\n            </ion-avatar>\n          </ion-item>\n        </ion-col>\n\n        <ion-col>\n          <ion-item lines=\"none\" (click)=\"radioSelected('Bueno')\">\n            <ion-label class=\"imgSinSeleccionar\">Bueno</ion-label>\n            <!-- <ion-radio mode=\"md\" item-left value=\"Bueno\"></ion-radio> -->\n            <ion-avatar>\n              <!-- <img class=\"imgSinSeleccionar\" src=\"../../../assets/icon/img2.png\" alt=\"imgBueno\"> -->\n              <img\n                [ngClass]=\"pollSelectedBue ? 'imgSeleccionadaExcBue' : 'imgSinSeleccionar'\"\n                src=\"../../../assets/icon/img2.png\"\n                alt=\"imgBueno\"\n              />\n            </ion-avatar>\n          </ion-item>\n        </ion-col>\n      </ion-row>\n      <ion-row>\n        <ion-col>\n          <ion-item lines=\"none\" (click)=\"radioSelected('Regular')\">\n            <ion-label class=\"imgSinSeleccionar\">Regular</ion-label>\n            <!-- <ion-radio mode=\"md\" item-left value=\"Regular\"></ion-radio> -->\n            <ion-avatar>\n              <!-- <img class=\"imgSinSeleccionar\" src=\"../../../assets/icon/img3.png\" alt=\"imgRegular\"> -->\n              <img\n                [ngClass]=\"pollSelectedReg ? 'imgSeleccionadaRegDef' : 'imgSinSeleccionar'\"\n                src=\"../../../assets/icon/img3.png\"\n                alt=\"imgRegular\"\n              />\n            </ion-avatar>\n          </ion-item>\n        </ion-col>\n\n        <ion-col>\n          <ion-item lines=\"none\" (click)=\"radioSelected('Deficiente')\">\n            <ion-label class=\"imgSinSeleccionar\">Deficiente</ion-label>\n            <!-- <ion-radio mode=\"md\" item-left value=\"Deficiente\"></ion-radio> -->\n            <ion-avatar>\n              <!-- <img class=\"imgSinSeleccionar\" src=\"../../../assets/icon/img4.png\" alt=\"imgDeficiente\"> -->\n              <img\n                [ngClass]=\"pollSelectedDef ? 'imgSeleccionadaRegDef' : 'imgSinSeleccionar'\"\n                src=\"../../../assets/icon/img4.png\"\n                alt=\"imgDeficiente\"\n              />\n            </ion-avatar>\n          </ion-item>\n        </ion-col>\n      </ion-row>\n    </ion-radio-group>\n  </div>\n</div>\n\n<div style=\"border: 1px solid black; border-radius: 10px\" *ngIf=\"showSignature\" class=\"firmaContent\">\n  <signature-pad [options]=\"signaturePadOptions\" (onBeginEvent)=\"drawStart()\" (onEndEvent)=\"drawComplete()\"> </signature-pad>\n  <div class=\"ion-text-center\">\n    <p class=\"firma\" *ngIf=\"namePersonSignature\">\n      {{ namePersonSignature.Nombre }}\n    </p>\n  </div>\n</div>\n<ion-button (click)=\"clear()\" expand=\"block\" *ngIf=\"showSignature\" fill=\"clear\" shape=\"round\"> Borrar </ion-button>\n\n<div class=\"ion-text-justify\" *ngIf=\"showSignature\">\n  <p>\n    Mi calificación del servicio fue: <strong>{{ answerPoll }}</strong>\n  </p>\n  <p>\n    Al guardar, está autorizando el uso de su firma ÚNICAMENTE para el registro de la ejecución de las actividades relacionadas en el acta\n    de asesoría en promoción y prevención de POSITIVA COMPAÑÍA DE SEGUROS S.A. La política de tratamiento de la Política de tratamiento de\n    la información la puede consultar en https://www.positiva.gov.co Una vez las actividades sean validadas por POSITIVA COMPAÑÍA DE SEGUROS\n    S.A. se enviarán los soportes en PDF a través del correo electrónico registrado en las actividades.\n  </p>\n</div>\n\n<div class=\"ion-text-center\" style=\"margin-bottom: 30px\">\n  <ion-grid>\n    <ion-row>\n      <ion-col size=\"3\"></ion-col>\n      <ion-col size=\"6\">\n        <ion-button *ngIf=\"enableBtnGuardar\" (click)=\"saveSignatureWithoutQR()\" expand=\"block\" color=\"primary\" shape=\"round\">\n          Guardar\n        </ion-button>\n      </ion-col>\n      <ion-col size=\"3\"></ion-col>\n    </ion-row>\n  </ion-grid>\n</div>\n","import { Component, EventEmitter, Input, OnInit, Output, ViewChild } from '@angular/core';\nimport { AlertController } from '@ionic/angular';\nimport { Storage } from '@ionic/storage';\nimport { SignaturePad } from 'angular2-signaturepad';\n\n@Component({\n  selector: 'app-signature-without-qr',\n  templateUrl: './signature-without-qr.component.html',\n  styleUrls: ['./signature-without-qr.component.scss'],\n})\nexport class SignatureWithoutQRComponent implements OnInit {\n  pollSelectedExce = false;\n  pollSelectedBue = false;\n  pollSelectedReg = false;\n  pollSelectedDef = false;\n\n  answerPoll: {};\n\n  signatureEntered: string;\n\n  signatureEnteredARL: string;\n\n  @ViewChild(SignaturePad) signaturePad: SignaturePad;\n\n  // tslint:disable-next-line: ban-types\n  public signaturePadOptions: Object = {\n    maxWidth: 1,\n    minWidth: 1,\n    canvasWidth: 300,\n    canvasHeight: 300,\n  };\n\n  @Input() namePersonSignature: any;\n  @Input() verificationCodeInput: number;\n  showSignature = false;\n\n  @Output() infoSignatureWithoutQR = new EventEmitter();\n\n  infoUserARL: any;\n\n  enableBtnGuardar = false;\n\n  constructor(\n    private alertController: AlertController,\n    private storage: Storage\n  ) {}\n\n  ionViewDidEnter() {}\n\n  ngOnInit() {\n    this.getInfoUser();\n  }\n\n  async getInfoUser() {\n    this.infoUserARL = await this.storage.get('sesion');\n  }\n\n  radioSelected(selectedPoll) {\n    switch (selectedPoll) {\n      case 'Excelente':\n        this.pollSelectedExce = true;\n        this.pollSelectedReg = false;\n        this.pollSelectedBue = false;\n        this.pollSelectedDef = false;\n        this.showSignature = true;\n        this.answerPoll = 'Excelente';\n        break;\n      case 'Bueno':\n        this.pollSelectedBue = true;\n        this.pollSelectedExce = false;\n        this.pollSelectedReg = false;\n        this.pollSelectedDef = false;\n        this.showSignature = true;\n        this.answerPoll = 'Bueno';\n        break;\n      case 'Regular':\n        this.pollSelectedReg = true;\n        this.pollSelectedExce = false;\n        this.pollSelectedBue = false;\n        this.pollSelectedDef = false;\n        this.showSignature = true;\n        this.answerPoll = 'Regular';\n        break;\n      case 'Deficiente':\n        this.pollSelectedDef = true;\n        this.pollSelectedExce = false;\n        this.pollSelectedBue = false;\n        this.pollSelectedReg = false;\n        this.showSignature = true;\n        this.answerPoll = 'Deficiente';\n        break;\n      default:\n        break;\n    }\n  }\n\n  drawComplete() {\n    const firma = this.signaturePad.toDataURL().split(',');\n    this.signatureEntered = firma[0].concat(',').concat(' ').concat(firma[1]);\n    if (this.signatureEntered) {\n      this.enableBtnGuardar = true;\n    } else {\n      this.enableBtnGuardar = false;\n    }\n  }\n\n  drawStart() {\n    // will be notified of szimek/signature_pad's onBegin event\n    console.log('begin drawing');\n  }\n\n  clear() {\n    this.signaturePad.clear();\n    this.enableBtnGuardar = false;\n  }\n\n  saveSignatureWithoutQR() {\n    const infoWithoutQR = {\n      answerPoll: this.answerPoll,\n      signatureEntered: this.signatureEntered,\n    };\n    this.infoSignatureWithoutQR.emit(infoWithoutQR);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SurveyAndSignaturePage } from './survey-and-signature.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SurveyAndSignaturePage,\n  },\n  {\n    path: 'responsibleSignatureARL',\n    loadChildren: () =>\n      import('../responsible-signature-arl/responsible-signature-arl.module').then(m => m.ResponsibleSignatureARLPageModule),\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SurveyAndSignaturePageRoutingModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { SignaturePadModule } from 'angular2-signaturepad';\nimport { ComponentsModule } from './../../components/components.module';\nimport { SignatureQRComponent } from './signature-qr/signature-qr.component';\nimport { SignatureWithoutQRComponent } from './signature-without-qr/signature-without-qr.component';\nimport { SurveyAndSignaturePageRoutingModule } from './survey-and-signature-routing.module';\nimport { SurveyAndSignaturePage } from './survey-and-signature.page';\n\n@NgModule({\n  imports: [CommonModule, FormsModule, IonicModule, SignaturePadModule, SurveyAndSignaturePageRoutingModule, ComponentsModule],\n  declarations: [SurveyAndSignaturePage, SignatureQRComponent, SignatureWithoutQRComponent],\n})\nexport class SurveyAndSignaturePageModule {}\n","<ion-header>\n  <ion-grid>\n    <ion-row>\n      <ion-col size=\"2\">\n        <ion-toolbar color=\"tertiary\">\n          <ion-buttons slot=\"start\">\n            <ion-back-button color=\"primary\" mode=\"md\" defaultHref=\"/\"></ion-back-button>\n          </ion-buttons>\n        </ion-toolbar>\n      </ion-col>\n      <ion-col size=\"10\">\n        <ion-title class=\"titulo\">Encuesta y firma de la empresa</ion-title>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n</ion-header>\n\n<ion-content>\n  <div class=\"ion-padding\">\n    <div class=\"ion-text-center\">\n      <h3>Responsable de la empresa</h3>\n    </div>\n    <ion-item lines=\"none\">\n      <ion-select\n        placeholder=\"Seleccionar\"\n        [(ngModel)]=\"selectedVal\"\n        interface=\"action-sheet\"\n        mode=\"ios\"\n        color=\"primary\"\n        class=\"full-width-select bg-light mt-3 rounded pl-1 pr-1\"\n      >\n        <ion-select-option *ngFor=\"let responsable of data\" class=\"custom-options\" [value]=\"responsable\">\n          {{responsable.Nombre}}\n        </ion-select-option>\n      </ion-select>\n    </ion-item>\n\n    <div class=\"ion-text-start\" *ngIf=\"selectedVal\">\n      <h3>Tipo de documento</h3>\n    </div>\n    <ion-input class=\"bg-light mt-3 rounded pl-1 pr-1\" readonly *ngIf=\"selectedVal\"> {{selectedVal.tipoDocumentoDescripcion}}</ion-input>\n\n    <div class=\"ion-text-start\" *ngIf=\"selectedVal\">\n      <h3>Documento de identificación</h3>\n    </div>\n    <ion-input class=\"bg-light mt-3 rounded pl-1 pr-1\" readonly *ngIf=\"selectedVal\">{{selectedVal.numeroDocumento}} </ion-input>\n\n    <div class=\"ion-text-start\" *ngIf=\"selectedVal\">\n      <h3>Correo Electrónico</h3>\n    </div>\n    <ion-input class=\"bg-light mt-3 rounded pl-1 pr-1\" readonly *ngIf=\"selectedVal\">{{selectedVal.correo}}</ion-input>\n\n    <div class=\"ion-text-start\" *ngIf=\"selectedVal\">\n      <h3>Cargo</h3>\n    </div>\n    <ion-input class=\"bg-light mt-3 rounded pl-1 pr-1\" readonly *ngIf=\"selectedVal\">{{selectedVal.cargo}}</ion-input>\n  </div>\n\n  <ng-container *ngIf=\"selectedVal\">\n    <div class=\"ion-padding\">\n      <ion-list style=\"background: none\">\n        <ion-item lines=\"none\">\n          <ion-label class=\"bold\">{{textCheckFirma}} se va a firmar con código QR</ion-label>\n          <ion-toggle [disabled]=\"disabledFirma\" (ionChange)=\"changeOptSignature($event)\"></ion-toggle>\n        </ion-item>\n      </ion-list>\n    </div>\n\n    <div class=\"ion-padding\" *ngIf=\"!showSignature\">\n      <div class=\"ion-text-center\">\n        <h4>Firma responsable de la empresa</h4>\n      </div>\n      <div>\n        <ion-grid>\n          <ion-row>\n            <ion-col size=\"1\"></ion-col>\n            <ion-col size=\"10\">\n              <ion-button color=\"tertiary\" (click)=\"verification()\" expand=\"block\"> Ver Acta </ion-button>\n            </ion-col>\n            <ion-col size=\"1\"></ion-col>\n          </ion-row>\n\n          <ion-row>\n            <ion-col size=\"1\"></ion-col>\n            <ion-col size=\"10\">\n              <ion-button expand=\"block\" [disabled]=\"disabledBtnSignature\" (click)=\"confirmVerificationCode()\"> Firma Acta </ion-button>\n            </ion-col>\n            <ion-col size=\"1\"></ion-col>\n          </ion-row>\n        </ion-grid>\n      </div>\n    </div>\n\n    <div class=\"ion-padding\">\n      <app-signature-qr (infoEnteredSignatureQR)=\"getInfoSignatureQR($event)\" *ngIf=\"showSignature\"></app-signature-qr>\n      <app-signature-without-qr\n        [verificationCodeInput]=\"verificationCode\"\n        [namePersonSignature]=\"selectedVal\"\n        (infoSignatureWithoutQR)=\"getInfoSignatureQR($event)\"\n        *ngIf=\"!showSignature\"\n      >\n      </app-signature-without-qr>\n    </div>\n  </ng-container>\n</ion-content>\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Directory, Filesystem } from '@capacitor/filesystem';\nimport { AlertController, LoadingController, ModalController, Platform, ToastController } from '@ionic/angular';\nimport { Storage } from '@ionic/storage';\nimport { AdvisoryVerificationComponent } from '../../components/advisory-verification/advisory-verification.component';\nimport { ActivityListCompanyService } from '../../services/activities/activityListCompany/activity-list-company.service';\nimport { AdvisoryTopicService } from '../../services/activities/advisoryTopic/advisory-topic.service';\nimport { PhotoServiceService } from '../../services/attach/photo-service.service';\nimport { CacheService } from '../../services/cache/cache.service';\nimport { ConnectionStatusEnum, NetworkService } from '../../services/network/network.service';\nimport { CorreoNotificacionActaApp } from 'src/app/intarfaces/interfaces';\n\n@Component({\n  selector: 'app-survey-and-signature',\n  templateUrl: './survey-and-signature.page.html',\n  styleUrls: ['./survey-and-signature.page.scss'],\n})\nexport class SurveyAndSignaturePage implements OnInit {\n  data: any[] = [];\n  selectedVal: any;\n  showSignature = false;\n  verificationCode: number;\n\n  responsibleList: any[] = [];\n\n  textCheckFirma: any = 'NO';\n  disabledFirma = false;\n\n  infoSurveyQR: any;\n\n  disabledBtnSignature = false;\n\n  valueNetwork: any;\n\n  actasAsesoria = [];\n\n  infoUserARL: any;\n\n  actaAsesoriaGestionada: any;\n\n  cargaArchivos: any;\n\n  loading: any;\n\n  filesBase64: any[] = [];\n\n  filesConcat: any = '';\n\n  constructor(\n    private platform: Platform,\n    private cacheService: CacheService,\n    private router: Router,\n    private storage: Storage,\n    private net: NetworkService,\n    private photoService: PhotoServiceService,\n    private loadingCtlr: LoadingController,\n    private advisoryTopicService: AdvisoryTopicService,\n    private activityListCompany: ActivityListCompanyService,\n    private toastController: ToastController,\n    private modalCtrl: ModalController,\n    private alertController: AlertController\n  ) {}\n\n  async ionViewWillEnter() {\n    const leerArchivos = await this.readFile();\n  }\n\n  ngOnInit() {\n    this.responsibleList = JSON.parse(sessionStorage.companySelected).listaReposables;\n    console.log('responsables', this.responsibleList);\n    this.data = this.responsibleList;\n    this.getInfoUser();\n  }\n\n  async getInfoUser() {\n    this.infoUserARL = await this.storage.get('sesion');\n    console.log('this.infoUserARL', this.infoUserARL);\n  }\n\n  async confirmVerificationCode() {\n    let data2: any;\n    let verification: any;\n    const handlerVerification = data => {\n      data2 = data;\n    };\n\n    const handlerVerificationCode = () => {\n      verification = true;\n    };\n\n    const alert = await this.alertController.create({\n      cssClass: 'my-custom-class',\n      backdropDismiss: false,\n      mode: 'ios',\n      // tslint:disable-next-line: max-line-length\n      header: `Ingrese el código de verificación, si seleccionas la opción reenviar código, se enviará al siguiente correo: ${this.selectedVal.correo}`,\n      inputs: [\n        {\n          name: 'verificationCodeInput',\n          type: 'tel',\n          placeholder: 'Código de verificación',\n        },\n      ],\n      buttons: [\n        {\n          text: 'Reenviar código',\n          handler: handlerVerificationCode,\n        },\n        {\n          text: 'Aceptar',\n          handler: handlerVerification,\n        },\n        {\n          text: 'Cancelar',\n          role: 'cancel',\n          cssClass: 'secondary',\n          handler: () => {\n            console.log('Confirm Cancel');\n          },\n        },\n      ],\n    });\n\n    alert.onDidDismiss().then(async () => {\n      if (data2) {\n        if (this.selectedVal) {\n          this.disabledFirma = true;\n          if (this.selectedVal.codigoVerificacion === data2.verificationCodeInput) {\n            this.verificationCode = data2.verificationCodeInput;\n            this.disabledBtnSignature = true;\n          } else {\n            this.notification('Atención', 'El código ingresado no es valido, por favor intente nuevamente');\n            this.disabledFirma = false;\n          }\n        } else {\n          this.notification('Alerta', 'Debes seleccionar a un responsable de la empresa.');\n        }\n      } else {\n        if (verification) {\n          if (this.selectedVal) {\n            const checkNetwork = this.validateNetwork();\n            if (checkNetwork) {\n              const idEmpresa = JSON.parse(sessionStorage.companySelected).id;\n              const idResponsable = this.selectedVal.id;\n              this.presentLoading('Reenviando código de verificación ...');\n              const siEnvioCorreo = await this.activityListCompany.recordarCodigoVerificacion(idResponsable, idEmpresa).toPromise();\n              if (siEnvioCorreo) {\n                this.notification('Exitoso', `Se reenvio el código de verificación al correo ${this.selectedVal.correo}`);\n                this.loading.dismiss();\n              } else {\n                this.notification('Error', `No se pudo envíar el código de verificación al correo: ${this.selectedVal.correo}`);\n                this.loading.dismiss();\n              }\n            } else {\n              this.notification('Alerta', 'No tienes conexión a internet para realizar esta funcionalidad');\n            }\n          } else {\n            this.notification('Alerta', 'Debes seleccionar a un responsable de la empresa.');\n          }\n        }\n      }\n    });\n\n    await alert.present();\n  }\n\n  OnChange(event) {\n    this.selectedVal = event.detail.value;\n    // this.confirmVerificationCode();\n  }\n\n  getInfoSignatureQR(infoQR) {\n    const fechaCreaciónActa = new Date();\n\n    if (this.textCheckFirma === 'NO') {\n      this.textCheckFirma = false;\n      const answerPoll = infoQR.answerPoll.charAt(0);\n      this.infoSurveyQR = {\n        nombreResponsable: this.selectedVal.Nombre,\n        responsableId: this.selectedVal.id,\n        tipoDocumentoResponsable: this.selectedVal.tipoDocumentoDescripcion,\n        numeroDocumentoResponsable: this.selectedVal.numeroDocumento,\n        cargo: this.selectedVal.cargo,\n        firmaQR: this.textCheckFirma,\n        answerPool: answerPoll,\n        signature: infoQR.signatureEntered,\n        dateCreatedSurvey: fechaCreaciónActa,\n      };\n      this.cacheService.saveSurveyQR(this.infoSurveyQR);\n      this.router.navigateByUrl('/u/execLog/pending-visits/visit-id/company-info/comments/survey-signature/responsibleSignatureARL');\n    } else {\n      this.textCheckFirma = true;\n      this.infoSurveyQR = {\n        nombreResponsable: this.selectedVal.Nombre,\n        responsableId: this.selectedVal.id,\n        tipoDocumentoResponsable: this.selectedVal.tipoDocumentoDescripcion,\n        numeroDocumentoResponsable: this.selectedVal.numeroDocumento,\n        cargo: this.selectedVal.cargo,\n        firmaQR: this.textCheckFirma,\n\n        nombreResponsableARL: infoQR.nombreResponsableARL,\n        apellidoResponsableARL: infoQR.apellidosResponsableARL,\n        documentoResponsableARL: infoQR.documentoUsuarioARL,\n        nombreProveedor: infoQR.nombreProveedor,\n        cargoARL: infoQR.cargo,\n        licenciaSSTARL: infoQR.licenciaSST,\n        signature: infoQR.signatureEntered,\n        dateCreatedSurvey: fechaCreaciónActa,\n      };\n      this.cacheService.saveSurveyQR(this.infoSurveyQR);\n      this.sendTask();\n    }\n  }\n\n  changeOptSignature(event) {\n    if (event.detail.checked === true) {\n      this.showSignature = true;\n      this.textCheckFirma = 'SI';\n    } else {\n      this.showSignature = false;\n      this.textCheckFirma = 'NO';\n    }\n  }\n\n  async verification() {\n    // this.router.navigateByUrl('/u/execLog/pending-visits/visit-id/company-info/comments/survey-signature/advisoryVerification');\n    const infoActa = this.cacheService.getAllInfoToAdvisory();\n    const modal = await this.modalCtrl.create({\n      component: AdvisoryVerificationComponent,\n      componentProps: {\n        info: infoActa,\n      },\n    });\n\n    modal.present();\n  }\n\n  async sendTask() {\n    const checkNetwork = this.validateNetwork();\n    const idProveedor = this.infoUserARL.idProveedor;\n    this.actaAsesoriaGestionada = this.cacheService.createActaAsesoria(idProveedor);\n    const files = this.getFiles();\n\n    if (checkNetwork) {\n      await this.presentLoading('Creando acta de asesoría ...');\n      let creacionActa = await this.advisoryTopicService.saveActaAsesoria(this.actaAsesoriaGestionada).toPromise();\n      creacionActa = creacionActa.split(';');\n\n      if (creacionActa[0] === 'true' && creacionActa[1] !== '-1') {\n        for (const f of files) {\n          const body = { ...f, UidActaAsesoria: +creacionActa[1] };\n          await this.advisoryTopicService.uploadFileActaAsesoria(body).toPromise();\n        }\n\n        if (this.actaAsesoriaGestionada && this.actaAsesoriaGestionada.TTA_lista && this.actaAsesoriaGestionada.TTA_lista.length > 0) {\n          for (const tta of this.actaAsesoriaGestionada.TTA_lista) {\n            const idActividadMigradaPorUsuario = tta.id;\n\n            // envio correo notificacion acta asesoria \n            const notifCorreoActa: CorreoNotificacionActaApp = { Fk_ID_ActividadMigradaPorUsuario: idActividadMigradaPorUsuario };\n            await this.advisoryTopicService.enviarCorreoNotificacionActaApp(notifCorreoActa).toPromise();\n          }\n        }\n\n        this.photoService.photos = [];\n        const listaActividades = await this.storage.get('listaActividades');\n\n        for (let i = 0; i < listaActividades.length; i++) {\n          const actividadesMigradas = listaActividades[i].listaActividadesMigradas;\n          const ids = [];\n\n          actividadesMigradas.forEach(element => {\n            const idActividad = element.id;\n            const TTA_LISTA = this.actaAsesoriaGestionada.TTA_lista;\n            const index = TTA_LISTA.findIndex(x => x.id === idActividad);\n\n            if (index > -1) {\n              ids.push(idActividad);\n            }\n          });\n\n          listaActividades[i].listaActividadesMigradas = actividadesMigradas.filter(a => !ids.find(ii => ii === a.id));\n        }\n\n        this.storage.set('listaActividades', listaActividades);\n        this.registerTime(this.actaAsesoriaGestionada.AE_HorasTotales);\n        this.notification('Atención', 'Se ha creado el acta de asesoría');\n        this.router.navigateByUrl('/u/execLog');\n      } else {\n        this.notification('Error', 'No se pudo crear el acta de asesoría');\n      }\n      this.loading.dismiss();\n    } else {\n      const activitiesChange = [];\n      const getInfoActaAsesoria = this.cacheService.getAllInfoToAdvisory();\n      const actSelec = JSON.parse(sessionStorage.companySelected);\n\n      for (let i = 0; i < actSelec.listaActividadesMigradas.length; i++) {\n        const codeActividadesMigradas = actSelec.listaActividadesMigradas[i].idActividad;\n        const encontro = getInfoActaAsesoria.activities.find(element => element.idActividad === codeActividadesMigradas);\n\n        if (encontro) {\n          encontro.estadoInterno = 'Por enviar';\n          activitiesChange.push(encontro);\n        } else {\n          activitiesChange.push(actSelec.listaActividadesMigradas[i]);\n        }\n      }\n\n      actSelec.listaActividadesMigradas = activitiesChange;\n      const cambioCompanySelected = JSON.stringify(actSelec);\n      sessionStorage.setItem('companySelected', cambioCompanySelected);\n      const saveActaAsesoria = this.cacheService.saveActasAsesoria(files);\n\n      if (saveActaAsesoria) {\n        this.registerTime(this.actaAsesoriaGestionada.AE_HorasTotales);\n\n        this.notification(\n          'Atención',\n          'El móvil no tiene acceso a datos, por lo cual el acta de asesoría se guardó con estado pendiente por enviar.'\n        );\n\n        this.router.navigateByUrl('/u/execLog');\n      }\n    }\n  }\n\n  async readFile() {\n    const documentosAdjuntados = this.cacheService.saveAttach;\n\n    for (let i = 0; i < documentosAdjuntados.length; i++) {\n      const nombreArchivo = documentosAdjuntados[i].nombreArchivo;\n      const idActividad = documentosAdjuntados[i].idActividad;\n      const extensionBase = documentosAdjuntados[i].extensionBase64;\n\n      try {\n        await Filesystem.readFile({\n          path: `${idActividad}/${nombreArchivo}`,\n          directory: Directory.Data,\n        }).then(data => {\n          const base64 = extensionBase.concat(',').concat(data.data);\n          const objUploadFile = {\n            UidActividadMigradaXUSuario: idActividad,\n            TipoSoporte: documentosAdjuntados[i].tipoDocumento,\n            Base64: base64,\n          };\n          this.filesBase64.push(objUploadFile);\n        });\n      } catch (e) {\n        console.log(e);\n      }\n    }\n  }\n\n  removeFile() {\n    const activities = this.cacheService.saveAttach;\n\n    for (let i = 0; i < activities.length; i++) {\n      const nombreArchivo = activities[i].nombreArchivo;\n      const idActividad = activities[i].idActividad;\n\n      try {\n        Filesystem.deleteFile({\n          path: `${idActividad}/${nombreArchivo}`,\n          directory: Directory.Data,\n        });\n      } catch {}\n    }\n  }\n\n  validateNetwork() {\n    const status = this.net.getNetworkStatus();\n\n    if (status === ConnectionStatusEnum.Offline) {\n      this.presentToast();\n    }\n\n    return status === ConnectionStatusEnum.Online;\n  }\n\n  async presentLoading(message) {\n    this.loading = await this.loadingCtlr.create({\n      mode: 'ios',\n      message,\n    });\n    return this.loading.present();\n  }\n\n  async presentToast() {\n    const toast = await this.toastController.create({\n      message: 'Verifique su conexión a internet.',\n      duration: 2000,\n    });\n    toast.present();\n  }\n\n  async notification(titulo, notificacion) {\n    const alert = await this.alertController.create({\n      header: titulo,\n      backdropDismiss: false,\n      mode: 'ios',\n      message: notificacion,\n      buttons: ['ACEPTAR'],\n    });\n\n    alert.onDidDismiss();\n\n    await alert.present();\n  }\n\n  /**\n   * Registra el tiempo de ejecución de esta actividad para el día actual.\n   *\n   * @param duration Texto que contiene la duración de la actividad.\n   */\n  private async registerTime(duration: string): Promise<void> {\n    const re = /(\\d+)(\\s+Horas\\s+)(\\d+)(\\s+Minutos)/gm;\n    const results = re.exec(duration);\n\n    if (!results) {\n      return;\n    }\n\n    const minutes = +results[1] * 60 + +results[3];\n    await this.cacheService.setRegisteredTime(minutes);\n  }\n\n  private getFiles(): any[] {\n    const files: any[] = [];\n    const imagenesAdjuntas = this.cacheService.obtenerAdjuntosFoto();\n\n    for (let i = 0; i < this.filesBase64.length; i++) {\n      const objAdjuntarDoc = this.filesBase64[i];\n      files.push(objAdjuntarDoc);\n    }\n\n    for (let j = 0; j < imagenesAdjuntas.length; j++) {\n      const element = imagenesAdjuntas[j];\n\n      element.forEach(async documento => {\n        const objAdjuntarImg = {\n          UidActividadMigradaXUSuario: documento.idActividad,\n          TipoSoporte: documento.idTipoArchivo,\n          base64: documento.foto.base64Imagen,\n        };\n\n        files.push(objAdjuntarImg);\n      });\n    }\n\n    this.removeFile();\n\n    return files;\n  }\n}\n"]}