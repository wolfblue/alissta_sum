{"version":3,"sources":["./src/app/pages/companies/list-confirmed/list-confirmed-routing.module.ts","./src/app/pages/companies/list-confirmed/list-confirmed.module.ts","./src/app/pages/companies/list-confirmed/list-confirmed.page.ts","./src/app/pages/companies/list-confirmed/list-confirmed.page.html"],"names":[],"mappings":"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","file":"list-confirmed-list-confirmed-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { ListConfirmedPage } from './list-confirmed.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ListConfirmedPage,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ListConfirmedPageRoutingModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { PipesModule } from 'src/app/pipes/pipes.module';\nimport { ListConfirmedPageRoutingModule } from './list-confirmed-routing.module';\nimport { ListConfirmedPage } from './list-confirmed.page';\n\n@NgModule({\n  imports: [CommonModule, FormsModule, IonicModule, ListConfirmedPageRoutingModule, PipesModule],\n  declarations: [ListConfirmedPage],\n})\nexport class ListConfirmedPageModule {}\n","import { Component, NgZone } from '@angular/core';\nimport { finalize } from 'rxjs/operators';\nimport { AlertService } from 'src/app/services/alert/alert.service';\nimport { CompaniesService } from 'src/app/services/companies/companies.service';\n\n/**\n * Componente para la vista de listado de empresas confirmadas.\n */\n@Component({\n  selector: 'app-list-confirmed',\n  templateUrl: './list-confirmed.page.html',\n  styleUrls: ['./list-confirmed.page.scss'],\n})\nexport class ListConfirmedPage {\n  /**\n   * Listado de empresas confirmadas.\n   */\n  companies: any[];\n\n  /**\n   * Término de búsqueda para la casilla de filtrado de empresas.\n   */\n  term: string;\n\n  constructor(\n    private companiesService: CompaniesService,\n    private alertService: AlertService,\n    private ngZone: NgZone\n  ) {}\n\n  ionViewWillEnter(): void {\n    this.retrieveCompanies();\n  }\n\n  /**\n   * Permite la edición de la empresa indicada.\n   *\n   * @param id Identificador de empresa.\n   */\n  async edit(id: number): Promise<void> {\n    const company = await this.companiesService.prepareCompany(id);\n    delete company.__confirmed;\n    await this.companiesService.saveChanges();\n    this.retrieveCompanies();\n  }\n\n  /**\n   * Envía los datos al servidor para su procesamiento.\n   *\n   * @param id Identificador de empresa.\n   */\n  async send(id: number): Promise<void> {\n    const onError = (): void => {\n      this.ngZone.run(async () => {\n        const alert = await this.alertService.showAlert(\n          'Error',\n          'Ha ocurrido un error en el servidor y no se pudieron guardar los datos. Intente más tarde.'\n        );\n\n        await alert.present();\n        this.companiesService.discardChanges();\n      });\n    };\n\n    const loading = await this.alertService.showLoading();\n    await this.companiesService.prepareCompany(id);\n\n    this.companiesService\n      .save()\n      .pipe(finalize(() => this.alertService.hideLoading(loading)))\n      .subscribe({\n        next: r => {\n          this.ngZone.run(async () => {\n            const result = r.split(';')[0];\n\n            if (result !== 'true') {\n              onError();\n\n              return;\n            }\n\n            const alert = await this.alertService.showAlert('Empresa actualizada', 'Los datos se han registrado exitosamente.');\n\n            await alert.present();\n            await this.retrieveCompanies();\n          });\n        },\n        error: onError,\n      });\n  }\n\n  /**\n   * Establece las empresas confirmadas que se encuentren en el almacén de datos.\n   */\n  private async retrieveCompanies(): Promise<void> {\n    const companies = await this.companiesService.updatedCompanies;\n\n    this.companies = companies.filter(c => c.__confirmed);\n  }\n}\n","<ion-header class=\"ion-no-border\">\n  <ion-grid>\n    <ion-row>\n      <ion-col size=\"2\">\n        <ion-back-button mode=\"md\" color=\"primary\" defaultHref=\"/\"></ion-back-button>\n      </ion-col>\n      <ion-col size=\"10\">\n        <ion-searchbar animated color=\"primary\" placeholder=\"Buscar\" (ionChange)=\"term = $event.detail.value\"> </ion-searchbar>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n</ion-header>\n\n<ion-content class=\"ion-padding\">\n  <!-- Listado de empresas confirmadas -->\n  <ng-container *ngIf=\"companies?.length; else noCompaniesTmp\">\n    <ng-container *ngFor=\"let c of companies | filterCompanies : ['strRazonSocial', 'strNumeroDcto', 'stringObservaciones']: term\">\n      <ng-container *ngTemplateOutlet=\"companyTmp; context: { company: c }\"></ng-container>\n    </ng-container>\n  </ng-container>\n</ion-content>\n\n<!-- Plantilla para vista sin empresas -->\n<ng-template #noCompaniesTmp>\n  <div class=\"no-companies-wrapper\">\n    <div class=\"message ion-padding\">\n      <img src=\"../../../assets/icon/icono_observaciones.svg\" />\n      <h3>No tiene empresas para enviar.</h3>\n    </div>\n  </div>\n</ng-template>\n\n<!-- Plantilla de empresa -->\n<ng-template #companyTmp let-company=\"company\">\n  <ion-card class=\"ion-no-margin\">\n    <ion-card-header>\n      <div class=\"header-wrapper\">\n        <div class=\"title\">\n          <ion-item lines=\"none\">{{ company.strRazonSocial }}</ion-item>\n          <ion-item lines=\"none\">{{ company.str_Sigla_Documento }}: {{ company.strNumeroDcto }}</ion-item>\n        </div>\n        <ion-icon\n          [attr.name]=\"company.__showDetails ? 'chevron-up-outline' : 'chevron-down-outline'\"\n          (click)=\"company.__showDetails = !company.__showDetails\"\n        >\n        </ion-icon>\n      </div>\n    </ion-card-header>\n    <ion-card-content>\n      <ion-item lines=\"none\">\n        <div class=\"field\">\n          <h4>Dirección Empresa Sede Principal</h4>\n          {{ company.eDSedesActualizadas.strDireccion }}\n        </div>\n      </ion-item>\n\n      <ion-item lines=\"none\">\n        <div class=\"field\">\n          <h4>Indicador de zona</h4>\n          {{ company.eDSedesActualizadas.srtIndicadorZona }}\n        </div>\n      </ion-item>\n\n      <ng-container *ngIf=\"company.__showDetails\">\n        <ion-item lines=\"none\">\n          <div class=\"field\">\n            <h4>Departamento Sede Principal</h4>\n            {{ company.eDSedesActualizadas.Nombre_Departamento_Sede }}\n          </div>\n        </ion-item>\n\n        <ion-item lines=\"none\">\n          <div class=\"field\">\n            <h4>Municipio Sede Principal</h4>\n            {{ company.eDSedesActualizadas.Nombre_Municipio_Sede }}\n          </div>\n        </ion-item>\n\n        <ion-item lines=\"none\">\n          <div class=\"field\">\n            <h4>Código/A.E. Principal</h4>\n            {{ company.strCodigoActividadEconomica }} - {{ company.strActividadEconomicaNombre }}\n          </div>\n        </ion-item>\n\n        <ion-item lines=\"none\">\n          <div class=\"field\">\n            <h4>Sector Económico</h4>\n            {{ company.strDescripcionSectorEconomico }}\n          </div>\n        </ion-item>\n\n        <ion-item lines=\"none\">\n          <div class=\"field\">\n            <h4>Celular Contacto</h4>\n            {{ company.strCelular }}\n          </div>\n        </ion-item>\n\n        <ion-item lines=\"none\">\n          <div class=\"field\">\n            <h4>Teléfono Notificación</h4>\n            {{ company.strTelefono }}\n          </div>\n        </ion-item>\n\n        <ion-item lines=\"none\">\n          <div class=\"field\">\n            <h4>Correo Notificación</h4>\n            {{ company.strCorreoElectronico }}\n          </div>\n        </ion-item>\n\n        <ion-item lines=\"none\">\n          <div class=\"field\">\n            <h4>Código Postal</h4>\n            {{ company.eDSedesActualizadas.strCodigoPostal }}\n          </div>\n        </ion-item>\n\n        <ion-item lines=\"none\">\n          <div class=\"field\">\n            <h4>TD/No. Identificación Representante Legal</h4>\n            {{ company.strSiglaRepresentanteLegal }} - {{ company.strNumeroDcto_Representant_Legal }}\n          </div>\n        </ion-item>\n\n        <ion-item lines=\"none\">\n          <div class=\"field\">\n            <h4>Nombre Representante Legal</h4>\n            {{ company.strNombre_Representant_Legal }}\n          </div>\n        </ion-item>\n\n        <ion-item lines=\"none\">\n          <div class=\"field\">\n            <h4>Observaciones</h4>\n            <ion-textarea rows=\"1\" readonly=\"true\" [value]=\"company.strObservaciones\"></ion-textarea>\n          </div>\n        </ion-item>\n      </ng-container>\n\n      <ion-item lines=\"none\">\n        <ion-button fill=\"clear\" slot=\"start\" (click)=\"edit(company.Pk_Id_AS_004_Empresas_AMigrar)\"> Editar </ion-button>\n        <ion-button fill=\"clear\" slot=\"end\" (click)=\"send(company.Pk_Id_AS_004_Empresas_AMigrar)\"> Enviar </ion-button>\n      </ion-item>\n    </ion-card-content>\n  </ion-card>\n</ng-template>\n"],"sourceRoot":"webpack:///"}