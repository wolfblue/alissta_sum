{"version":3,"sources":["./src/app/pages/pending-visits/pending-visits-routing.module.ts","./src/app/pages/pending-visits/pending-visits.module.ts","./src/app/pages/pending-visits/pending-visits.page.ts","./src/app/pages/pending-visits/pending-visits.page.html"],"names":[],"mappings":"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","file":"pending-visits-pending-visits-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { PendingVisitsPage } from './pending-visits.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PendingVisitsPage,\n  },\n  {\n    path: ':id',\n    loadChildren: () => import('../visit/visit.module').then(m => m.VisitPageModule),\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PendingVisitsPageRoutingModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { PendingVisitsPageRoutingModule } from './pending-visits-routing.module';\nimport { PendingVisitsPage } from './pending-visits.page';\nimport { PipesModule } from '../../pipes/pipes.module';\nimport { ScrollingModule } from '@angular/cdk/scrolling';\n\n@NgModule({\n  imports: [CommonModule, FormsModule, IonicModule, PipesModule, ScrollingModule, PendingVisitsPageRoutingModule],\n  declarations: [PendingVisitsPage],\n})\nexport class PendingVisitsPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Network } from '@ionic-native/network/ngx';\nimport { LoadingController } from '@ionic/angular';\nimport { Storage } from '@ionic/storage';\nimport { ActivityListCompanyService } from '../../services/activities/activityListCompany/activity-list-company.service';\nimport { NetworkService } from '../../services/network/network.service';\n\n/**\n * Componente de la vista de visitas pendientes.\n */\n@Component({\n  selector: 'app-pending-visits',\n  templateUrl: './pending-visits.page.html',\n  styleUrls: ['./pending-visits.page.scss'],\n})\nexport class PendingVisitsPage implements OnInit {\n  listActivity: any[] = [];\n\n  textoBuscar = '';\n  moduloBuscar = '';\n  loading: any;\n\n  // Para la prueba\n  showListPendingVisit = true;\n\n  isConnected = false;\n\n  constructor(\n    private listActivitiesCompany: ActivityListCompanyService,\n    private network: Network,\n    private storage: Storage,\n    private net: NetworkService,\n    private loadingCtlr: LoadingController,\n    private router: Router\n  ) {}\n\n  ngOnInit() {\n    this.validateDataListActivities();\n    this.net.showIPAddress();\n  }\n\n  /**\n   * Establece el texto a buscar en la lista\n   *\n   * @param event texto a buscar\n   */\n  search(event: any) {\n    this.textoBuscar = event.detail.value;\n  }\n\n  /**\n   * Establece el filtrado por modulo\n   *\n   * @param event modulo a buscar\n   */\n  searchModulo(event: any) {\n    this.moduloBuscar = event.detail.value;\n  }\n\n  companySelected(activity: any) {\n    // tslint:disable-next-line: prefer-for-of\n    for (let i = 0; i < activity.listaActividadesMigradas.length; i++) {\n      activity.listaActividadesMigradas[i].estadoInterno = 'Migradas';\n    }\n    sessionStorage.companySelected = JSON.stringify(activity);\n  }\n\n  async listActivities() {\n    this.presentLoading();\n    const documentoUsuario = await this.storage.get('sesion');\n\n    setTimeout(() => {\n      this.listActivitiesCompany.listActivityForCompany(documentoUsuario.idPersona).subscribe(\n        async response => {\n          console.log('Respuesta de actividade', response);\n\n          const listActivity = response.listActivitiesCompany || [];\n          const actasGuardadas: any[] = (await this.storage.get('actasAsesoriaSinInternet')) || [];\n\n          listActivity.forEach((a: any) => {\n            a.listaActividadesMigradas = a.listaActividadesMigradas.filter(\n              (aa: any) => actasGuardadas.find(aaa => aaa.activities.find((aaaa: any) => aaaa.id === aa.id)) === undefined\n            );\n          });\n\n          this.storage.set('departamentos', response.listDepartamentos);\n          this.storage.set('municipios', response.listMunicipios);\n          this.storage.set('listArchivosSoporte', response.listArchivosSoporte);\n\n          // Guardar las actividades en un BD local.\n          this.storage.set('listaActividades', listActivity);\n          this.validateDataListActivities();\n          this.showListPendingVisit = false;\n          this.loading.dismiss();\n        },\n        err => {\n          this.loading.dismiss();\n          this.showListPendingVisit = false;\n        }\n      );\n    }, 2000);\n  }\n\n  async presentLoading() {\n    this.loading = await this.loadingCtlr.create({\n      mode: 'ios',\n      message: 'Cargando',\n    });\n    return this.loading.present();\n  }\n\n  async validateDataListActivities() {\n    const dataListActivities = await this.storage.get('listaActividades');\n\n    if (dataListActivities) {\n      this.listActivity = dataListActivities.filter((a: any) => a.listaActividadesMigradas.length > 0);\n    } else {\n      this.listActivity = [];\n    }\n  }\n}\n","<ion-header class=\"ion-no-border\">\n  <ion-grid>\n    <ion-row>\n      <ion-col size=\"2\">\n        <ion-toolbar>\n          <ion-buttons slot=\"start\">\n            <ion-back-button mode=\"md\" color=\"primary\" defaultHref=\"/\"></ion-back-button>\n          </ion-buttons>\n        </ion-toolbar>\n      </ion-col>\n      <ion-col size=\"10\">\n        <ion-searchbar animated color=\"primary\" placeholder=\"Buscar\" (ionChange)=\"search($event)\"> </ion-searchbar>\n      </ion-col>\n    </ion-row>\n    <ion-row>\n      <ion-col size=\"12\">\n        <ion-item>\n          <ion-label>Módulo</ion-label>\n          <ion-select placeholder=\"Seleccionar módulo\" (ionChange)=\"searchModulo($event)\">\n            <ion-select-option value=\"GEM\">Gran Empresa</ion-select-option>\n            <ion-select-option value=\"GMP\">Gran MiPyme</ion-select-option>\n            <ion-select-option value=\"GCT\">Grandes Cuentas</ion-select-option>\n            <ion-select-option value=\"ASE\">Asistencia/Asesoría</ion-select-option>\n            <ion-select-option value=\"INV\">Investigación AT</ion-select-option>\n            <ion-select-option value=\"REC\">Reclasificación</ion-select-option>\n            <ion-select-option value=\"\">Todos</ion-select-option>\n          </ion-select>\n        </ion-item>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n</ion-header>\n\n<ion-content class=\"ion-padding\">\n  <ion-slides mode=\"ios\" *ngIf=\"listActivity.length == 0\">\n    <ion-slide>\n      <ion-grid>\n        <ion-row>\n          <ion-col size=\"12\">\n            <div class=\"ion-text-center\">\n              <img class=\"imgIcono\" src=\"../../../assets/icon/icono_observaciones.svg\" alt=\"\" />\n            </div>\n          </ion-col>\n        </ion-row>\n        <ion-row>\n          <ion-col size=\"12\">\n            <strong>\n              <h3 class=\"titulo\">Recuerde sincronizar las actividades que va a ejecutar aquí.</h3>\n            </strong>\n          </ion-col>\n        </ion-row>\n        <ion-row>\n          <ion-col size=\"12\">\n            <ion-icon name=\"arrow-down-outline\"></ion-icon>\n          </ion-col>\n        </ion-row>\n      </ion-grid>\n    </ion-slide>\n  </ion-slides>\n\n  <!-- Esto cuando se este consumiendo el servicio -->\n\n  <cdk-virtual-scroll-viewport itemSize=\"150\" minBufferPx=\"750\" maxBufferPx=\"1500\">\n    <ion-list *ngIf=\"listActivity.length >= 1\">\n      <ion-item\n        color=\"secondary\"\n        routerLink=\"./visit-id\"\n        *cdkVirtualFor=\"let activity of listActivity | searchCompanyList: textoBuscar : ['numeroDocumento', 'name']: moduloBuscar; let i = index\"\n        (click)=\"companySelected(activity)\"\n        detail\n      >\n        <div style=\"width: 100%\">\n          <ion-label class=\"labelEnProceso\">En proceso 0 de {{activity.listaActividadesMigradas.length}}</ion-label>\n          <ion-grid>\n            <ion-row>\n              <ion-col size=\"12\">\n                <ion-label>{{activity.name}}</ion-label>\n              </ion-col>\n            </ion-row>\n            <ion-row>\n              <ion-col size=\"12\">\n                <ion-label>{{activity.tipoDocumentoDescripcion}} {{activity.numeroDocumento}}</ion-label>\n              </ion-col>\n            </ion-row>\n            <ion-row>\n              <ion-col size=\"12\">\n                <ion-label>Módulo: <span class=\"nombre-modulo\">{{activity.ModuloNombre}}</span></ion-label>\n              </ion-col>\n            </ion-row>\n          </ion-grid>\n        </div>\n      </ion-item>\n    </ion-list>\n  </cdk-virtual-scroll-viewport>\n\n  <!-- Descargar visitas -->\n  <ion-fab vertical=\"bottom\" horizontal=\"center\" slot=\"fixed\">\n    <ion-fab-button (click)=\"listActivities()\">\n      <ion-icon name=\"cloud-download-outline\"></ion-icon>\n    </ion-fab-button>\n  </ion-fab>\n</ion-content>\n"],"sourceRoot":"webpack:///"}