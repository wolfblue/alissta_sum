{"version":3,"sources":["webpack:///src/app/pages/AT/recommendation/recommendation-routing.module.ts","webpack:///src/app/pages/AT/recommendation/recommendation.module.ts","webpack:///src/app/pages/AT/recommendation/recommendation.page.html","webpack:///src/app/pages/AT/recommendation/recommendation.page.ts"],"names":["routes","path","component","RecommendationPageRoutingModule","forChild","imports","exports","RecommendationPageModule","declarations","RecommendationPage","cacheService","route","router","alertController","COMMENTS_PATH","RECOMMENDATION_PATH","establecerActividad","initForm","recomendacionesCompletadas","actividad","siniestro","Recomendaciones","every","r","diligenciado","formGroup","invalid","create","header","mode","message","buttons","alert","present","body","value","Observaciones","observaciones","next","actividades","activitiesSelectedForExec","idActividad","snapshot","params","activityId","indice","findIndex","a","id","find","index","navigateByUrl","numeroSiniestroControl","Id_Siniestro","disabled","numeroIdentificacionControl","Doc_Empleado","nombreTrabajadorControl","Primer_Nombre","Primer_Apellido","fechaOcurrencia","Fecha_AT","isInvalid","isBefore","subtract","fechaOcurrenciaControl","format","fechaRadicacion","FechaRadicacionInvestigacionEmpresa","fechaRadicacionControl","fechaRemision","FechaRemisionRecomendacionEmpresa","fechaRemisionControl","fechaProyectada","fechaProyectadaSeguimientoEmpresa","fechaProyectadaControl","observacionesControl","required","numeroSiniestro","numeroIdentificacion","nombreTrabajador","selector","templateUrl","styleUrls"],"mappings":"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","file":"AT-recommendation-recommendation-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { RecommendationPage } from './recommendation.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RecommendationPage,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class RecommendationPageRoutingModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { RecommendationPageRoutingModule } from './recommendation-routing.module';\nimport { RecommendationPage } from './recommendation.page';\n\n@NgModule({\n  imports: [CommonModule, FormsModule, ReactiveFormsModule, IonicModule, RecommendationPageRoutingModule],\n  declarations: [RecommendationPage],\n})\nexport class RecommendationPageModule {}\n","<ion-header>\n  <ion-grid>\n    <ion-row>\n      <ion-col size=\"2\">\n        <ion-toolbar color=\"tertiary\">\n          <ion-buttons slot=\"start\">\n            <ion-back-button color=\"primary\" mode=\"md\" defaultHref=\"/\"></ion-back-button>\n          </ion-buttons>\n        </ion-toolbar>\n      </ion-col>\n      <ion-col size=\"10\">\n        <div class=\"titulo\">Seguimiento a Recomendaciones AT</div>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n</ion-header>\n\n<ion-content>\n  <form [formGroup]=\"formGroup\" (ngSubmit)=\"save()\" *ngIf=\"formGroup\">\n    <!-- Datos del accidente -->\n    <ion-card class=\"background-secondary\">\n      <ion-card-header>\n        <ion-card-title>Datos del accidente</ion-card-title>\n      </ion-card-header>\n\n      <ion-card-content>\n        <ion-list lines=\"none\">\n          <ion-item>\n            <ion-label>Número siniestro</ion-label>\n            <ion-input class=\"ion-margin-start\" formControlName=\"numeroSiniestro\"></ion-input>\n          </ion-item>\n          <ion-item>\n            <ion-label position=\"stacked\">Número de identificación</ion-label>\n            <ion-input class=\"ion-margin-top\" formControlName=\"numeroIdentificacion\"></ion-input>\n          </ion-item>\n          <ion-item>\n            <ion-label position=\"stacked\">Nombre trabajador</ion-label>\n            <ion-input class=\"ion-margin-top\" formControlName=\"nombreTrabajador\"></ion-input>\n          </ion-item>\n          <ion-item class=\"ion-margin-top fix-label\">\n            <ion-label>Fecha de ocurrencia AT</ion-label>\n            <ion-input class=\"ion-margin-start\" formControlName=\"fechaOcurrencia\"></ion-input>\n          </ion-item>\n        </ion-list>\n      </ion-card-content>\n    </ion-card>\n\n    <!-- Descripción AT -->\n    <ion-card class=\"background-primary\">\n      <ion-card-header>\n        <ion-card-title>Descripción de AT</ion-card-title>\n      </ion-card-header>\n\n      <ion-card-content>\n        <p class=\"ion-text-justify\">{{ this.actividad.siniestro.Descripcion_AT }}</p>\n      </ion-card-content>\n    </ion-card>\n\n    <!-- Fechas -->\n    <ion-card class=\"background-primary\">\n      <ion-card-content>\n        <ion-list lines=\"none\">\n          <ion-item class=\"fix-label\">\n            <ion-label>Fecha radicación investigación AT</ion-label>\n            <ion-input class=\"ion-margin-start\" formControlName=\"fechaRadicacion\"></ion-input>\n          </ion-item>\n          <ion-item class=\"fix-label\">\n            <ion-label>Fecha remisión recomendaciones AT</ion-label>\n            <ion-input class=\"ion-margin-start\" formControlName=\"fechaRemision\"></ion-input>\n          </ion-item>\n          <ion-item class=\"fix-label\">\n            <ion-label>Fecha proyecta del seguimiento</ion-label>\n            <ion-input class=\"ion-margin-start\" formControlName=\"fechaProyectada\"></ion-input>\n          </ion-item>\n        </ion-list>\n      </ion-card-content>\n    </ion-card>\n\n    <!-- Recomendaciones enviadas -->\n    <ion-card>\n      <ion-card-header>\n        <ion-card-title>Recomendaciones enviadas</ion-card-title>\n      </ion-card-header>\n\n      <ion-card-content>\n        <ng-container *ngFor=\"let r of actividad.siniestro.Recomendaciones\">\n          <ng-container *ngTemplateOutlet=\"recommendation; context: { recomendacion: r }\"></ng-container>\n        </ng-container>\n      </ion-card-content>\n    </ion-card>\n\n    <!-- Observaciones -->\n    <ion-card>\n      <ion-card-content>\n        <ion-textarea placeholder=\"Observaciones\" formControlName=\"observaciones\"></ion-textarea>\n      </ion-card-content>\n    </ion-card>\n\n    <div class=\"text-center ion-margin\">\n      <ion-button type=\"submit\">Continuar</ion-button>\n    </div>\n  </form>\n</ion-content>\n\n<ng-template #recommendation let-recomendacion=\"recomendacion\">\n  <div class=\"recommendation\">\n    <div class=\"recommendation-text\">{{ recomendacion.Recomendacion }}</div>\n    <div class=\"recommendation-type\">\n      <span class=\"label\">Tipo</span>\n      <ion-item lines=\"none\">\n        <ion-label>Fuente</ion-label>\n        <ion-checkbox slot=\"start\" [checked]=\"recomendacion.tipoFuente\" disabled=\"true\"></ion-checkbox>\n      </ion-item>\n      <ion-item lines=\"none\">\n        <ion-label>Medio</ion-label>\n        <ion-checkbox slot=\"start\" [checked]=\"recomendacion.tipoMedio\" disabled=\"true\"></ion-checkbox>\n      </ion-item>\n      <ion-item lines=\"none\">\n        <ion-label>Trabajo</ion-label>\n        <ion-checkbox slot=\"start\" [checked]=\"recomendacion.tipoTrabajo\" disabled=\"true\"></ion-checkbox>\n      </ion-item>\n      <ion-item class=\"actions\" lines=\"none\" [ngSwitch]=\"recomendacion.diligenciado\">\n        <ion-button [routerLink]=\"'./follow-up/' + recomendacion.Pk_Id_SiniestroRecomendaciones\" *ngSwitchCase=\"true\">\n          <ion-checkbox color=\"success\" checked=\"true\" disabled=\"true\"></ion-checkbox>\n        </ion-button>\n        <ion-button [routerLink]=\"'./follow-up/' + recomendacion.Pk_Id_SiniestroRecomendaciones\" *ngSwitchDefault class=\"arrowIcon\">\n          <ion-icon slot=\"icon-only\" name=\"arrow-forward-circle-outline\"></ion-icon>\n        </ion-button>\n      </ion-item>\n    </div>\n  </div>\n</ng-template>\n","import { Component, OnInit } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AlertController } from '@ionic/angular';\nimport * as moment from 'moment';\nimport { CacheService } from 'src/app/services/cache/cache.service';\n\n@Component({\n  selector: 'app-recommendation',\n  templateUrl: './recommendation.page.html',\n  styleUrls: ['./recommendation.page.scss'],\n})\nexport class RecommendationPage implements OnInit {\n  /**\n   * Formulario.\n   */\n  formGroup: FormGroup;\n\n  /**\n   * Actividad con recomendaciones pendientes para la visita actual.\n   */\n  actividad: any;\n\n  /**\n   * Ruta de la vista de comentarios.\n   */\n  private readonly COMMENTS_PATH = '/u/execLog/pending-visits/visit-id/company-info/comments';\n\n  /**\n   * Ruta de la vista de recomendaciones.\n   */\n  private readonly RECOMMENDATION_PATH = '/u/execLog/pending-visits/visit-id/recommendation';\n\n  constructor(\n    private cacheService: CacheService,\n    private route: ActivatedRoute,\n    private router: Router,\n    private alertController: AlertController\n  ) {}\n\n  ngOnInit() {}\n\n  ionViewWillEnter(): void {\n    this.establecerActividad();\n    this.initForm();\n  }\n\n  /**\n   * Guarda la información de la actividad y las recomendaciones asociadas.\n   */\n  async save(): Promise<void> {\n    const recomendacionesCompletadas = this.actividad.siniestro.Recomendaciones.every((r: any) => r.diligenciado);\n\n    if (!recomendacionesCompletadas || this.formGroup.invalid) {\n      const alert = await this.alertController.create({\n        header: 'Datos incompletos',\n        mode: 'ios',\n        message: 'Debe completar todas las recomendaciones y añadir observaciones.',\n        buttons: ['OK'],\n      });\n\n      alert.present();\n\n      return;\n    }\n\n    const body = this.formGroup.value;\n    this.actividad.siniestro.Observaciones = body.observaciones;\n    this.next();\n  }\n\n  /**\n   * Redirige a la siguiente vista. Si en el arreglo de actividades seleccionadas para la visita\n   * existen más actividades con recomendaciones con un índice en el arreglo superior del actual,\n   * se recargará esta vista con los datos de esa recomendación. En caso de no quedar recomendaciones\n   * pendientes, se redirige a la vista de comentarios de la visita.\n   */\n  private next(): void {\n    const actividades = this.cacheService.activitiesSelectedForExec;\n    const idActividad = +this.route.snapshot.params.activityId;\n    const indice = actividades.findIndex(a => a.id === idActividad);\n    const actividad = actividades.find((a, index) => index > indice && a.siniestro);\n    const path = actividad ? `${this.RECOMMENDATION_PATH}/${actividad.id}` : this.COMMENTS_PATH;\n    this.router.navigateByUrl(path);\n  }\n\n  /**\n   * Establece la actividad a la cuál hacer la recomendaciones.\n   */\n  private establecerActividad(): void {\n    const actividades = this.cacheService.activitiesSelectedForExec;\n    const idActividad = +this.route.snapshot.params.activityId;\n    const actividad = actividades.find(a => a.id === idActividad);\n    this.actividad = actividad;\n  }\n\n  /**\n   * Inicializa el formulario de la recomendación.\n   */\n  private initForm(): void {\n    const numeroSiniestroControl = new FormControl({\n      value: this.actividad.siniestro.Id_Siniestro,\n      disabled: true,\n    });\n\n    const numeroIdentificacionControl = new FormControl({\n      value: this.actividad.siniestro.Doc_Empleado,\n      disabled: true,\n    });\n\n    const nombreTrabajadorControl = new FormControl({\n      value: `${this.actividad.siniestro.Primer_Nombre} ${this.actividad.siniestro.Primer_Apellido}`,\n      disabled: true,\n    });\n\n    const fechaOcurrencia = moment(this.actividad.siniestro.Fecha_AT);\n    let isInvalid = fechaOcurrencia.isBefore(moment().subtract(100, 'years'));\n\n    const fechaOcurrenciaControl = new FormControl({\n      value: isInvalid ? 'Sin información' : fechaOcurrencia.format('DD/MM/YYYY'),\n      disabled: true,\n    });\n\n    const fechaRadicacion = moment(this.actividad.siniestro.FechaRadicacionInvestigacionEmpresa);\n    isInvalid = fechaRadicacion.isBefore(moment().subtract(100, 'years'));\n\n    const fechaRadicacionControl = new FormControl({\n      value: isInvalid ? 'Sin información' : fechaRadicacion.format('DD/MM/YYYY'),\n      disabled: true,\n    });\n\n    const fechaRemision = moment(this.actividad.siniestro.FechaRemisionRecomendacionEmpresa);\n    isInvalid = fechaRemision.isBefore(moment().subtract(100, 'years'));\n\n    const fechaRemisionControl = new FormControl({\n      value: isInvalid ? 'Sin información' : fechaRemision.format('DD/MM/YYYY'),\n      disabled: true,\n    });\n\n    const fechaProyectada = moment(this.actividad.siniestro.fechaProyectadaSeguimientoEmpresa);\n    isInvalid = fechaProyectada.isBefore(moment().subtract(100, 'years'));\n\n    const fechaProyectadaControl = new FormControl({\n      value: isInvalid ? 'Sin información' : fechaProyectada.format('DD/MM/YYYY'),\n      disabled: true,\n    });\n\n    const observacionesControl = new FormControl(this.actividad.siniestro.Observaciones, [Validators.required]);\n\n    this.formGroup = new FormGroup({\n      numeroSiniestro: numeroSiniestroControl,\n      numeroIdentificacion: numeroIdentificacionControl,\n      nombreTrabajador: nombreTrabajadorControl,\n      fechaOcurrencia: fechaOcurrenciaControl,\n      fechaRadicacion: fechaRadicacionControl,\n      fechaRemision: fechaRemisionControl,\n      fechaProyectada: fechaProyectadaControl,\n      observaciones: observacionesControl,\n    });\n  }\n}\n"]}