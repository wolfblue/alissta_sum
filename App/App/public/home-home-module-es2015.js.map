{"version":3,"sources":["./src/app/pages/home/home-routing.module.ts","./src/app/pages/home/home.module.ts","./src/app/pages/home/home.page.ts","./src/app/pages/home/home.page.html","./src/app/services/menu-configuracion.service.ts","./src/app/storage.service.ts"],"names":[],"mappings":"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","file":"home-home-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { HomePage } from './home.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HomePage,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class HomePageRoutingModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { Device } from '@ionic-native/device/ngx';\nimport { IonicModule } from '@ionic/angular';\nimport { HomePageRoutingModule } from './home-routing.module';\nimport { HomePage } from './home.page';\nimport { ComponentsModule } from 'src/app/components/components.module';\n\n@NgModule({\n  imports: [CommonModule, FormsModule, IonicModule, ComponentsModule, HomePageRoutingModule],\n  declarations: [HomePage],\n  providers: [Device],\n})\nexport class HomePageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { MenuConfiguracionService } from '../../services/menu-configuracion.service';\nimport { Router } from '@angular/router';\nimport { Platform, ToastController, AlertController } from '@ionic/angular';\nimport { FingerprintAIO } from '@ionic-native/fingerprint-aio/ngx';\nimport { StorageService } from 'src/app/storage.service';\n\n/**\n * Componente de la vista de inicio.\n */\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.page.html',\n  styleUrls: ['./home.page.scss'],\n})\nexport class HomePage implements OnInit {\n  /**\n   * Array de opciones del menú de configuración\n   */\n  optMenuMain: Observable<any[]>;\n\n  isShowLoginWithFinger = false;\n\n  isLoginWithFinger = false;\n\n  isAutologin = false;\n\n  constructor(\n    private router: Router,\n    private toastController: ToastController,\n    private alertController: AlertController,\n    private menuService: MenuConfiguracionService,\n    private faio: FingerprintAIO,\n    private platform: Platform,\n    private storageService: StorageService\n  ) {}\n\n  ngOnInit() {\n    this.optMenuMain = this.menuService.getMenuMain();\n\n    this.platform.ready().then(() => {\n      this.faio\n        .isAvailable()\n        .then((ava: any) => {\n          this.storageService\n            .get('isLoginWithFinger')\n            .then(result => {\n              if (result != null) {\n                this.isLoginWithFinger = result;\n              }\n            })\n            .catch(e => {\n              console.log('error: ' + e);\n            });\n          this.storageService\n            .get('showLoginWithFinger')\n            .then(result => {\n              if (result != null) {\n                this.isLoginWithFinger = result;\n              }\n            })\n            .catch(e => {\n              console.log('error: ' + e);\n            });\n          this.storageService\n            .get('autologin')\n            .then(result => {\n              if (result != null) {\n                this.isAutologin = result;\n              } else {\n                this.storageService.set('autologin', true);\n              }\n              if (!this.isShowLoginWithFinger && !this.isLoginWithFinger && !this.isAutologin) {\n                this.presentAlertConfirm();\n              }\n            })\n            .catch(e => {\n              console.log('error: ' + e);\n            });\n        })\n        .catch((error: any) => {\n          console.log(error);\n        });\n    });\n  }\n\n  async presentAlertConfirm() {\n    const alert = await this.alertController.create({\n      header: '¡Bienvenido!',\n      mode: 'ios',\n      message:\n        '<strong>Hola! </strong>Detectamos ' +\n        'que tu dispositivo cuenta con TouchID/FaceID ' +\n        '¿Te gustaría iniciar sesión la próxima vez con esta tecnología?',\n      buttons: [\n        {\n          text: 'Si',\n          handler: () => {\n            this.storageService.set('showLoginWithFinger', true);\n            this.storageService.set('activateFinger', true);\n            this.toastConfirmBiometric();\n          },\n        },\n        {\n          text: 'Cancelar',\n          role: 'cancel',\n          handler: () => {\n            this.storageService.set('showLoginWithFinger', false);\n            this.storageService.set('activateFinger', false);\n            this.storageService.remove('valueOne');\n            this.storageService.remove('valueTwo');\n            this.storageService.remove('valueThree');\n            this.alertCancelBiometric();\n          },\n        },\n      ],\n    });\n    await alert.present();\n  }\n\n  async toastConfirmBiometric() {\n    const toast = await this.toastController.create({\n      message: 'TouchID/FaceID Activado',\n      duration: 2000,\n    });\n    toast.present();\n  }\n\n  async alertCancelBiometric() {\n    const alert = await this.alertController.create({\n      header: '¡Recuerda!',\n      message: 'Puedes cambiar tus ajustes desde el menú configuración.',\n      buttons: [\n        {\n          text: 'Aceptar',\n        },\n      ],\n    });\n    await alert.present();\n  }\n\n  optionSelectedMenu(menuSelected) {\n    switch (menuSelected.title) {\n      case 'Comunicaciones':\n        this.router.navigateByUrl('u/list-communications');\n\n        break;\n      case 'Registro ejecución de actividades':\n        this.router.navigateByUrl('u/execLog');\n\n        break;\n      case 'Eventos Positiva':\n        this.router.navigateByUrl('u/consultEvent');\n\n        break;\n      case 'Actualizar Datos Empresa':\n        this.router.navigateByUrl('u/companies');\n\n        break;\n    }\n  }\n}\n","<app-header></app-header>\n\n<ion-content class=\"backgroundContent\">\n  <ion-grid>\n    <ion-row>\n      <ion-col size=\"6\" *ngFor=\"let menuOpt of optMenuMain | async; let i = index\">\n        <ion-card mode=\"ios\" *ngIf=\"menuOpt.show\" (click)=\"optionSelectedMenu(menuOpt)\">\n          <div class=\"vertical-center\">\n            <div class=\"center\">\n              <img [src]=\"menuOpt.icon\" alt=\"\" [class.padding-8]=\"menuOpt.title === 'Actualizar Datos Empresa'\" />\n            </div>\n          </div>\n          <ion-label>\n            <h4 class=\"tituloOpcion\">{{menuOpt.title}}</h4>\n          </ion-label>\n        </ion-card>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n</ion-content>\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class MenuConfiguracionService {\n  constructor(private http: HttpClient) {}\n\n  /**\n   * Este metodo permite hacer la petición al archivo donde estan las opciones para el menú de\n   * la vista de configuración\n   */\n  getMenuOpts() {\n    return this.http.get<any[]>('/assets/data/menuConfiguracion.json');\n  }\n\n  /**\n   * Este método permite consultar las opciones que existen en el menú principal home.page.html\n   */\n  getMenuMain() {\n    return this.http.get<any[]>('/assets/data/menuPrincipal-prod.json');\n  }\n\n  /**\n   * Este método permite consultar las opciones que existen en el menú de ejecución de\n   * actividades\n   */\n  getMenuExceActivities() {\n    return this.http.get<any[]>('/assets/data/menuExecuteActi.json');\n  }\n\n  /**\n   * Este método permitre consultar las opciones de ayuda en el menú de ejecución de\n   * actividades\n   */\n\n  getMenuHelpExceActivities() {\n    return this.http.get<any[]>('/assets/data/menuHelpExecuteActi.json');\n  }\n\n  /**\n   * Este método permite consultar las opciones cuando se selecciona una visita\n   */\n  getMenuActivitySelected() {\n    return this.http.get<any[]>('/assets/data/menuVisitActivity.json');\n  }\n}\n","import { Injectable } from '@angular/core';\r\nimport { Storage } from '@ionic/storage';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class StorageService {\r\n  constructor(private storage: Storage) {}\r\n\r\n  async set(key: string, value: any): Promise<boolean> {\r\n    let result: any;\r\n\r\n    try {\r\n      result = await this.storage.set(key, value);\r\n    } catch {\r\n      result = false;\r\n    }\r\n\r\n    return result !== false;\r\n  }\r\n\r\n  async get(key: string): Promise<any> {\r\n    let result: any;\r\n\r\n    try {\r\n      result = await this.storage.get(key);\r\n    } catch {}\r\n\r\n    return result;\r\n  }\r\n\r\n  remove(key: string) {\r\n    this.storage.remove(key);\r\n  }\r\n\r\n  clear() {\r\n    this.storage.clear();\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///"}