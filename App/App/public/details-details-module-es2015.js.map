{"version":3,"sources":["./src/app/pages/companies/details/details-routing.module.ts","./src/app/pages/companies/details/details.module.ts","./src/app/pages/companies/details/details.page.ts","./src/app/pages/companies/details/details.page.html","./src/app/services/companies/checkChanges.guard.ts"],"names":[],"mappings":"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","file":"details-details-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { CheckChangesGuard } from 'src/app/services/companies/checkChanges.guard';\nimport { DetailsPage } from './details.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    canDeactivate: [CheckChangesGuard],\n    component: DetailsPage,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DetailsPageRoutingModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { ComponentsModule } from 'src/app/components/components.module';\nimport { DetailsPageRoutingModule } from './details-routing.module';\nimport { DetailsPage } from './details.page';\n\n@NgModule({\n  imports: [CommonModule, FormsModule, ReactiveFormsModule, IonicModule, DetailsPageRoutingModule, ComponentsModule],\n  declarations: [DetailsPage],\n})\nexport class DetailsPageModule {}\n","import { Component, NgZone } from '@angular/core';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AlertController, PopoverController } from '@ionic/angular';\nimport { PopoverComponent } from 'src/app/components/popover/popover.component';\nimport { CompaniesService } from 'src/app/services/companies/companies.service';\n\n/**\n * Componente para la vista de detalles de empresa.\n */\n@Component({\n  selector: 'app-details',\n  templateUrl: './details.page.html',\n  styleUrls: ['./details.page.scss'],\n})\nexport class DetailsPage {\n  /**\n   * Formulario.\n   */\n  formGroup: FormGroup;\n\n  /**\n   * Compañía actual.\n   */\n  company: any;\n\n  /**\n   * Indica si mostrar u ocultar detalles de esta empresa en la tarjeta.\n   */\n  showDetails: boolean;\n\n  /**\n   * Indica si deben saltarse las comprobaciones de cambios de empresa al salir de esta vista.\n   * Estas comprobaciones se saltan cuando se sigue editando la empresa en otras vistas, como\n   * la de datos de empresa o contacto.\n   */\n  private bypass: boolean;\n\n  /**\n   * Textos de ayuda.\n   */\n  private readonly HINTS = {\n    direccion: {\n      text: 'al dar clic tendrá la posibilidad de actualizar la dirección de la sede principal.',\n      highlightedText: 'Estimado usuario: ',\n    },\n    actividad: {\n      text: 'Para la modificación de la actividad económica de la empresa, se debe realizar a través de un proceso de reclasificación de empresa ante POSITIVA.',\n      highlightedText: 'Recuerde: ',\n    },\n    sector: {\n      text: 'Para la modificación del sector económico de la empresa, se debe realizar a través de un proceso de reclasificación de empresa ante POSITIVA.',\n      highlightedText: 'Recuerde: ',\n    },\n  };\n\n  constructor(\n    private companiesService: CompaniesService,\n    private route: ActivatedRoute,\n    private router: Router,\n    private alertCtrl: AlertController,\n    private ngZone: NgZone,\n    private popoverCtrl: PopoverController\n  ) {}\n\n  ionViewWillEnter(): void {\n    this.bypass = false;\n    this.formGroup = undefined;\n    this.getCompany();\n  }\n\n  /**\n   * Navega a la siguiente vista de acuerdo a la selección del usuario.\n   */\n  nextPage(): void {\n    const selection = this.formGroup.controls.nextPage.value;\n    let path: string;\n\n    switch (selection) {\n      case 'companyData':\n        path = './edit-company';\n\n        break;\n      case 'contactData':\n        path = './contact-list';\n\n        break;\n    }\n\n    this.bypass = true;\n    this.router.navigate([path], { relativeTo: this.route });\n  }\n\n  /**\n   * Comprueba que no hayan cambios pendientes por guardar. En caso de que los haya, consulta al\n   * usuario si desea guardarlos para después o descartarlos.\n   *\n   * Regresa un valor booleano que indica si puede o no realizarse la navegación.\n   */\n  async canNavigate(): Promise<boolean> {\n    if (this.bypass) {\n      return true;\n    }\n\n    const updated = this.company?.__updated ?? [];\n\n    if (!updated.length) {\n      this.companiesService.discardChanges();\n\n      return true;\n    }\n\n    const guardar = async (): Promise<void> => {\n      result = await this.companiesService.saveChanges();\n\n      if (!result) {\n        const _alert = await this.alertCtrl.create({\n          backdropDismiss: false,\n          header: 'Atención',\n          mode: 'ios',\n          message: 'No tiene espacio suficiente en el dispositivo. Intente liberar memoria.',\n          buttons: ['ACEPTAR'],\n        });\n\n        await _alert.present();\n      }\n    };\n\n    const descartar = (): void => {\n      this.companiesService.discardChanges();\n      result = true;\n    };\n\n    let result: boolean;\n\n    return new Promise(async resolve => {\n      const alert = await this.alertCtrl.create({\n        header: 'Atención',\n        mode: 'ios',\n        backdropDismiss: false,\n        message: 'Tiene cambios pendientes por guardar. ¿Desea guardarlos para después o descartarlos?',\n        buttons: [\n          {\n            text: 'Guardar',\n            handler: () => {\n              alert.dismiss().then(async () => {\n                await guardar();\n                resolve(result);\n              });\n\n              return false;\n            },\n            role: 'save',\n          },\n          {\n            text: 'Descartar',\n            handler: () => {\n              alert.dismiss().then(async () => {\n                descartar();\n                resolve(result);\n              });\n\n              return false;\n            },\n            role: 'cancel',\n          },\n        ],\n      });\n\n      await alert.present();\n    });\n  }\n\n  /**\n   * Indica si se han hecho cambios en el módulo indicado.\n   *\n   * @param key Nombre del módulo.\n   */\n  hasChangedModule(key: string): boolean {\n    const updated = this.company.__updated ?? [];\n\n    return updated.find((m: string) => m === key) !== undefined;\n  }\n\n  /**\n   * Realiza la confirmación de los datos y presenta el resumen de carga.\n   */\n  async confirm(): Promise<void> {\n    const _confirm = (): void => {\n      this.ngZone.run(() => {\n        this.bypass = true;\n        this.router.navigate(['./signature'], { relativeTo: this.route });\n      });\n    };\n\n    const alert = await this.alertCtrl.create({\n      header: 'Estimado Usuario',\n      mode: 'ios',\n      backdropDismiss: false,\n      message: '¿Está seguro de la confirmación de sus datos?',\n      buttons: [\n        { text: 'Aceptar', role: 'accept', handler: _confirm },\n        { text: 'Cancelar', role: 'cancel' },\n      ],\n    });\n\n    await alert.present();\n  }\n\n  async showPopover(event: any, field: string): Promise<void> {\n    const popover = await this.popoverCtrl.create({\n      event,\n      component: PopoverComponent,\n      componentProps: { text: this.HINTS[field].text, highlightedText: this.HINTS[field].highlightedText },\n    });\n\n    await popover.present();\n  }\n\n  /**\n   * Establece la empresa de la vista de detalles.\n   */\n  private async getCompany(): Promise<void> {\n    const id = +this.route.snapshot.params.id;\n\n    try {\n      this.company = await this.companiesService.prepareCompany(id);\n    } catch {\n      this.company = this.companiesService.company;\n    }\n\n    if (!this.company) {\n      this.router.navigate(['../']);\n\n      return;\n    }\n\n    this.initForm();\n  }\n\n  /**\n   * Inicializa el formulario.\n   */\n  private initForm(): void {\n    const nextPageControl = new FormControl();\n    this.formGroup = new FormGroup({ nextPage: nextPageControl });\n  }\n}\n","<ion-header>\n  <ion-grid>\n    <ion-row>\n      <ion-col size=\"2\">\n        <ion-toolbar color=\"tertiary\">\n          <ion-buttons slot=\"start\">\n            <ion-back-button color=\"primary\" mode=\"md\" defaultHref=\"/\"></ion-back-button>\n          </ion-buttons>\n        </ion-toolbar>\n      </ion-col>\n      <ion-col size=\"10\">\n        <div class=\"title\"><div class=\"title-wrapper\">Solicitud Actualización Empresa</div></div>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n</ion-header>\n\n<ion-content class=\"backgroundContent ion-padding\">\n  <form [formGroup]=\"formGroup\" *ngIf=\"formGroup\">\n    <ion-card class=\"ion-no-margin\" *ngIf=\"company\">\n      <ion-card-header>\n        <div class=\"header-wrapper\">\n          <div class=\"title\">\n            <ion-item lines=\"none\">\n              <span class=\"razon-social\">{{ company.strRazonSocial }}</span>\n            </ion-item>\n            <ion-item lines=\"none\">{{ company.str_Sigla_Documento }}: {{ company.strNumeroDcto }}</ion-item>\n          </div>\n          <ion-icon [attr.name]=\"showDetails ? 'chevron-up-outline' : 'chevron-down-outline'\" (click)=\"showDetails = !showDetails\">\n          </ion-icon>\n        </div>\n      </ion-card-header>\n      <ion-card-content>\n        <ion-item lines=\"none\">\n          <div class=\"field with-help\">\n            <h4>\n              Dirección Empresa Sede Principal\n              <ion-button class=\"tooltip\" (click)=\"showPopover($event, 'direccion')\">\n                <ion-icon name=\"help-outline\" slot=\"icon-only\"></ion-icon>\n              </ion-button>\n            </h4>\n            {{ company.eDSedesActualizadas.strDireccion }}\n          </div>\n        </ion-item>\n\n        <ion-item lines=\"none\">\n          <div class=\"field\">\n            <h4>Indicador de zona</h4>\n            {{ company.eDSedesActualizadas.srtIndicadorZona === 'R' ? 'Rural' : 'Urbana' }}\n          </div>\n        </ion-item>\n\n        <ng-container *ngIf=\"showDetails\">\n          <ion-item lines=\"none\">\n            <div class=\"field\">\n              <h4>Departamento Sede Principal</h4>\n              {{ company.eDSedesActualizadas.Nombre_Departamento_Sede }}\n            </div>\n          </ion-item>\n\n          <ion-item lines=\"none\">\n            <div class=\"field\">\n              <h4>Municipio Sede Principal</h4>\n              {{ company.eDSedesActualizadas.Nombre_Municipio_Sede }}\n            </div>\n          </ion-item>\n\n          <ion-item lines=\"none\">\n            <div class=\"field with-help\">\n              <h4>\n                Código/A.E. Principal\n                <ion-button class=\"tooltip\" (click)=\"showPopover($event, 'actividad')\">\n                  <ion-icon name=\"help-outline\" slot=\"icon-only\"></ion-icon>\n                </ion-button>\n              </h4>\n              <span class=\"codigo-actividad\">{{ company.strCodigoActividadEconomica }}</span>\n              - {{ company.strActividadEconomicaNombre }}\n            </div>\n          </ion-item>\n\n          <ion-item lines=\"none\">\n            <div class=\"field with-help\">\n              <h4>\n                Sector Económico\n                <ion-button class=\"tooltip\" (click)=\"showPopover($event, 'sector')\">\n                  <ion-icon name=\"help-outline\" slot=\"icon-only\"></ion-icon>\n                </ion-button>\n              </h4>\n              {{ company.strDescripcionSectorEconomico }}\n            </div>\n          </ion-item>\n\n          <ion-item lines=\"none\">\n            <div class=\"field\">\n              <h4>Celular Contacto</h4>\n              {{ company.strCelular }}\n            </div>\n          </ion-item>\n\n          <ion-item lines=\"none\">\n            <div class=\"field\">\n              <h4>Teléfono Notificación</h4>\n              {{ company.strTelefono }}\n            </div>\n          </ion-item>\n\n          <ion-item lines=\"none\">\n            <div class=\"field\">\n              <h4>Correo Notificación</h4>\n              <span class=\"correo-notificacion\">{{ company.strCorreoElectronico }}</span>\n            </div>\n          </ion-item>\n\n          <ion-item lines=\"none\">\n            <div class=\"field\">\n              <h4>Código Postal</h4>\n              {{ company.eDSedesActualizadas.strCodigoPostal }}\n            </div>\n          </ion-item>\n\n          <ion-item lines=\"none\">\n            <div class=\"field\">\n              <h4>TD/No. Identificación Representante Legal</h4>\n              {{ company.strSiglaRepresentanteLegal }} - {{ company.strNumeroDcto_Representant_Legal }}\n            </div>\n          </ion-item>\n\n          <ion-item lines=\"none\">\n            <div class=\"field\">\n              <h4>Nombre Representante Legal</h4>\n              {{ company.strNombre_Representant_Legal }}\n            </div>\n          </ion-item>\n\n          <ion-item lines=\"none\">\n            <div class=\"field\">\n              <h4>Observaciones</h4>\n              <ion-textarea autoGrow=\"true\" readonly=\"true\" [value]=\"company.stringObservaciones\"></ion-textarea>\n            </div>\n          </ion-item>\n        </ng-container>\n\n        <ion-radio-group formControlName=\"nextPage\">\n          <ion-item lines=\"none\">\n            <ion-label class=\"radio-label\">\n              <ion-icon\n                class=\"icon-updated\"\n                name=\"checkmark-circle-outline\"\n                slot=\"start\"\n                *ngIf=\"hasChangedModule('company-data')\"\n              ></ion-icon>\n              Actualizar Datos Empresas\n            </ion-label>\n            <ion-radio slot=\"end\" value=\"companyData\"></ion-radio>\n          </ion-item>\n\n          <ion-item lines=\"none\">\n            <ion-label class=\"radio-label\">\n              <ion-icon name=\"checkmark-circle-outline\" slot=\"start\" *ngIf=\"hasChangedModule('contact-data')\"></ion-icon>\n              Actualizar Personas Contacto\n            </ion-label>\n            <ion-radio slot=\"end\" value=\"contactData\"></ion-radio>\n          </ion-item>\n        </ion-radio-group>\n      </ion-card-content>\n    </ion-card>\n\n    <ion-button class=\"ion-margin-bottom\" expand=\"block\" (click)=\"confirm()\"> Confirmar Datos </ion-button>\n\n    <ion-button class=\"ion-margin-bottom\" expand=\"block\" (click)=\"nextPage()\" *ngIf=\"!!formGroup.controls.nextPage.value\">\n      Continuar Proceso\n    </ion-button>\n  </form>\n</ion-content>\n","import { Injectable } from '@angular/core';\nimport { CanDeactivate } from '@angular/router';\nimport { DetailsPage } from 'src/app/pages/companies/details/details.page';\n\n/**\n * Comprueba si hay cambios pendientes por guardar en la empresa en edición actual.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class CheckChangesGuard implements CanDeactivate<DetailsPage> {\n  async canDeactivate(component: DetailsPage): Promise<boolean> {\n    return await component.canNavigate();\n  }\n}\n"],"sourceRoot":"webpack:///"}