{"version":3,"sources":["./src/app/pages/companies/contact-list/contact-list-routing.module.ts","./src/app/pages/companies/contact-list/contact-list.module.ts","./src/app/pages/companies/contact-list/contact-list.page.ts","./src/app/pages/companies/contact-list/contact-list.page.html"],"names":[],"mappings":"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","file":"contact-list-contact-list-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ContactListPage } from './contact-list.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ContactListPage,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ContactListPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ContactListPageRoutingModule } from './contact-list-routing.module';\n\nimport { ContactListPage } from './contact-list.page';\n\n@NgModule({\n  imports: [CommonModule, FormsModule, IonicModule, ContactListPageRoutingModule],\n  declarations: [ContactListPage],\n})\nexport class ContactListPageModule {}\n","import { ChangeDetectorRef, Component } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AlertController } from '@ionic/angular';\nimport { CompaniesService } from 'src/app/services/companies/companies.service';\n\n/**\n * Componente para la vista de listado de personas de contacto para la empresa actual.\n */\n@Component({\n  selector: 'app-contact-list',\n  templateUrl: './contact-list.page.html',\n  styleUrls: ['./contact-list.page.scss'],\n})\nexport class ContactListPage {\n  /**\n   * Listado de contactos.\n   */\n  contacts: any[];\n\n  /**\n   * Compañía actual.\n   */\n  private company: any;\n\n  constructor(\n    private route: ActivatedRoute,\n    private companiesService: CompaniesService,\n    private router: Router,\n    private alertCtrl: AlertController,\n    private ref: ChangeDetectorRef\n  ) {}\n\n  ionViewWillEnter(): void {\n    this.getContacts();\n  }\n\n  /**\n   * Redirige a la vista para crear un nuevo contacto.\n   */\n  add(): void {\n    this.edit();\n  }\n\n  /**\n   * Redirige a la vista de edición de contactos.\n   *\n   * @param id Número del documento del contacto a editar.\n   */\n  edit(id?: string): void {\n    this.router.navigate(['edit-contact'], { relativeTo: this.route, queryParams: { id } });\n  }\n\n  /**\n   * Elimina el contacto indicado de la lista de contactos para esta empresa.\n   *\n   * @param contact\n   */\n  async remove(contact: any): Promise<void> {\n    const drop = (): void => {\n      const index = this.contacts.findIndex(c => c === contact);\n      this.contacts.splice(index, 1);\n\n      const updated = this.company.__updated ?? [];\n      const found = updated.find((m: string) => m === 'contact-data');\n\n      if (!found) {\n        updated.push('contact-data');\n        this.company.__updated = updated;\n      }\n\n      this.ref.detectChanges();\n    };\n\n    const alert = await this.alertCtrl.create({\n      header: 'Atención',\n      mode: 'ios',\n      message: '¿Realmente desea eliminar este contacto?',\n      buttons: [\n        { text: 'Eliminar', role: 'drop', handler: drop },\n        { text: 'Cancelar', role: 'cancel' },\n      ],\n    });\n\n    await alert.present();\n  }\n\n  /**\n   * Cancela la edición de personas de contacto para la empresa.\n   */\n  cancel(): void {\n    const id = this.route.snapshot.params.id;\n    this.router.navigate([`/u/companies/list/${id}`], { replaceUrl: true });\n  }\n\n  /**\n   * Obtiene el nombre completo del contacto.\n   *\n   * @param contact Contacto.\n   */\n  getContactName(contact: any): string {\n    const primerNombre = contact.strPrimerNombre ?? '';\n    const segundoNombre = contact.strSegundoNombre ?? '';\n    const primerApellido = contact.strPrimerApellido ?? '';\n    const segundoApellido = contact.strSegundoApellido ?? '';\n    let name = `${primerNombre} ${segundoNombre} ${primerApellido} ${segundoApellido}`;\n    name = name.replace(/\\s+/g, ' ');\n    name = name.trim();\n\n    return name;\n  }\n\n  /**\n   * Establece el listado de contactos para esta empresa.\n   */\n  private async getContacts(): Promise<void> {\n    const id = +this.route.snapshot.params.id;\n\n    try {\n      this.company = await this.companiesService.prepareCompany(id);\n    } catch {\n      this.company = this.companiesService.company;\n    }\n\n    if (!this.company) {\n      this.cancel();\n\n      return;\n    }\n\n    this.contacts = this.company.listaPersonasContacto;\n  }\n}\n","<ion-header>\n  <ion-grid>\n    <ion-row>\n      <ion-col size=\"2\">\n        <ion-toolbar color=\"tertiary\">\n          <ion-buttons slot=\"start\">\n            <ion-back-button color=\"primary\" mode=\"md\" defaultHref=\"/\"></ion-back-button>\n          </ion-buttons>\n        </ion-toolbar>\n      </ion-col>\n      <ion-col size=\"10\">\n        <ion-title>Actualización Contactos</ion-title>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n</ion-header>\n\n<ion-content class=\"backgroundContent ion-padding\">\n  <ion-card class=\"ion-no-margin\" *ngFor=\"let c of contacts\">\n    <ion-card-header>\n      <div class=\"header-wrapper\">\n        <div class=\"title\">\n          <ion-item lines=\"none\"> {{ getContactName(c) }} </ion-item>\n          <ion-item lines=\"none\" class=\"role\">{{ c.strPapelRespresentacion }}</ion-item>\n        </div>\n        <ion-icon [attr.name]=\"c.__expanded ? 'chevron-up-outline' : 'chevron-down-outline'\" (click)=\"c.__expanded = !c.__expanded\">\n        </ion-icon>\n      </div>\n    </ion-card-header>\n\n    <ion-card-content>\n      <ng-container *ngIf=\"c.__expanded\">\n        <ion-item lines=\"none\"> {{ c.strSiglaTipoDoc }} {{ c.strNumeroDocumento }} </ion-item>\n        <ion-item lines=\"none\"> {{ c.strSexo }} </ion-item>\n        <ion-item lines=\"none\"> {{ c.strCelular }} </ion-item>\n        <ion-item lines=\"none\"> {{ c.strTelefono }} </ion-item>\n        <ion-item lines=\"none\"> {{ c.strEmail }} </ion-item>\n      </ng-container>\n\n      <ion-item lines=\"none\">\n        <ion-button fill=\"clear\" slot=\"start\" (click)=\"edit(c.strNumeroDocumento)\">Editar</ion-button>\n        <ion-button fill=\"clear\" slot=\"end\" (click)=\"remove(c)\">Eliminar</ion-button>\n      </ion-item>\n    </ion-card-content>\n  </ion-card>\n\n  <ion-fab class=\"ion-padding\" vertical=\"bottom\" horizontal=\"end\" slot=\"fixed\">\n    <ion-fab-button (click)=\"add()\">\n      <ion-icon name=\"add\"></ion-icon>\n    </ion-fab-button>\n  </ion-fab>\n</ion-content>\n"],"sourceRoot":"webpack:///"}